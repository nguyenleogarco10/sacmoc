<!DOCTYPE html>
<html lang="vi" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>S·∫Øc M·ªôc - V·∫ª ƒê·∫πp C√≥ Tr√°ch Nhi·ªám</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs-core@3.18.0/dist/tf-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs-converter@3.18.0/dist/tf-converter.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs-backend-webgl@3.18.0/dist/tf-backend-webgl.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow-models/face-landmarks-detection@1.0.2/dist/face-landmarks-detection.min.js"></script>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@300..700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Quicksand', sans-serif;
            background-color: #FDFBF8;
            color: #4A4A4A;
        }
        .text-brand { color: #8D6E63; }
        .bg-brand { background-color: #8D6E63; }
        .bg-brand-light { background-color: #D7CCC8; }
        .bg-brand-superlight { background-color: #EFEBE9; }
        .border-brand { border-color: #8D6E63; }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
            height: 400px;
            max-height: 50vh;
        }
        @media (max-width: 768px) {
            .chart-container {
                height: 500px;
                max-height: 70vh;
            }
        }
        .nav-link {
            transition: color 0.3s ease;
        }
        .nav-link:hover {
            color: #8D6E63;
        }
        .card-hover {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .card-hover:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.05), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
        .testimonial-container {
            display: flex;
            overflow-x: hidden;
            scroll-snap-type: x mandatory;
            -webkit-overflow-scrolling: touch;
        }
        .testimonial-card {
            flex: 0 0 100%;
            scroll-snap-align: start;
            transition: transform 0.5s ease-in-out;
        }
         @media (min-width: 768px) {
            .testimonial-card {
                flex: 0 0 50%;
            }
        }
        @media (min-width: 1024px) {
            .testimonial-card {
                flex: 0 0 33.3333%;
            }
        }
        #vto-video-container {
            position: relative;
            width: 100%;
            max-width: 500px; /* Control max size */
            margin: auto;
            aspect-ratio: 4 / 3; /* Maintain aspect ratio */
        }
        #vto-video, #vto-canvas {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border-radius: 0.5rem; /* Tailwind's rounded-lg */
            object-fit: cover; /* Ensure video covers the area */
        }
         #vto-video {
            transform: scaleX(-1); /* Mirror mode for webcam */
        }
        #vto-canvas {
            pointer-events: none; /* Allow interaction with elements below if any */
        }
    </style>
</head>
<body class="antialiased">

    <header id="header" class="bg-white/80 backdrop-blur-md fixed top-0 left-0 right-0 z-50 shadow-sm">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <div class="flex-shrink-0">
                    <a href="#hero" class="text-2xl font-bold text-brand">S·∫Øc M·ªôc</a>
                </div>
                <div class="hidden md:block">
                    <nav class="flex items-center space-x-8">
                        <a href="#philosophy" class="text-gray-600 nav-link font-medium">Tri·∫øt L√Ω</a>
                        <a href="#products" class="text-gray-600 nav-link font-medium">S·∫£n Ph·∫©m</a>
                        <a href="#transparency" class="text-gray-600 nav-link font-medium">Minh B·∫°ch</a>
                        <a href="#community" class="text-gray-600 nav-link font-medium">C·ªông ƒê·ªìng</a>
                    </nav>
                </div>
                 <div class="md:hidden">
                    <button id="mobile-menu-button" class="text-gray-600 hover:text-brand focus:outline-none">
                        <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7" />
                        </svg>
                    </button>
                </div>
            </div>
        </div>
        <div id="mobile-menu" class="md:hidden hidden">
            <nav class="px-2 pt-2 pb-3 space-y-1 sm:px-3">
                <a href="#philosophy" class="block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-brand hover:bg-gray-50">Tri·∫øt L√Ω</a>
                <a href="#products" class="block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-brand hover:bg-gray-50">S·∫£n Ph·∫©m</a>
                <a href="#transparency" class="block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-brand hover:bg-gray-50">Minh B·∫°ch</a>
                <a href="#community" class="block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-brand hover:bg-gray-50">C·ªông ƒê·ªìng</a>
            </nav>
        </div>
    </header>

    <main>
        <section id="hero" class="pt-16 h-screen flex items-center bg-cover bg-center" style="background-image: url('https://images.unsplash.com/photo-1590431305265-538183495a43?q=80&w=2070&auto=format&fit=crop');">
            <div class="absolute inset-0 bg-white/50"></div>
            <div class="relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
                <h1 class="text-4xl md:text-6xl font-extrabold text-brand tracking-tight">V·∫ª ƒê·∫πp C√≥ Tr√°ch Nhi·ªám</h1>
                <p class="mt-4 max-w-2xl mx-auto text-lg md:text-xl text-gray-700">S·∫Øc M·ªôc kh√¥ng ch·ªâ l√† son m√¥i. ƒê√≥ l√† m·ªôt l·ª±a ch·ªçn an to√†n cho b·∫°n, t·ª≠ t·∫ø v·ªõi h√†nh tinh v√† cam k·∫øt cho m·ªôt v·∫ª ƒë·∫πp minh b·∫°ch.</p>
                <div class="mt-8">
                    <a href="#philosophy" class="inline-block bg-brand text-white font-bold py-3 px-8 rounded-full shadow-lg hover:bg-opacity-90 transition-transform transform hover:scale-105">Kh√°m Ph√° C√¢u Chuy·ªán</a>
                </div>
            </div>
        </section>

        <section id="philosophy" class="py-20 bg-white">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="text-center">
                    <h2 class="text-3xl font-bold text-brand">Tri·∫øt L√Ω S·∫Øc M·ªôc</h2>
                    <p class="mt-4 max-w-3xl mx-auto text-lg text-gray-600">Ch√∫ng t√¥i ra ƒë·ªùi ƒë·ªÉ gi·∫£i quy·∫øt nh·ªØng lo ng·∫°i v·ªÅ s·ª©c kh·ªèe v√† m√¥i tr∆∞·ªùng trong ng√†nh m·ªπ ph·∫©m. S·∫Øc M·ªôc l√† c√¢u tr·∫£ l·ªùi cho nhu c·∫ßu v·ªÅ m·ªôt v·∫ª ƒë·∫πp kh√¥ng ch·ªâ r·∫°ng r·ª° b√™n ngo√†i m√† c√≤n an t√¢m t·ª´ b√™n trong.</p>
                </div>
                <div class="mt-16 grid gap-10 md:grid-cols-2 lg:grid-cols-4">
                    <div class="text-center p-6 bg-brand-superlight rounded-xl card-hover">
                        <div class="flex items-center justify-center h-16 w-16 rounded-full bg-brand-light mx-auto text-3xl">üåø</div>
                        <h3 class="mt-5 text-xl font-semibold text-brand">An To√†n & Tinh Khi·∫øt</h3>
                        <p class="mt-2 text-gray-600">C√¥ng th·ª©c v·ªõi h∆°n 95% th√†nh ph·∫ßn t·ª± nhi√™n, kh√¥ng ch·ª©a kim lo·∫°i n·∫∑ng, parabens hay h√≥a ch·∫•t ƒë·ªôc h·∫°i.</p>
                    </div>
                    <div class="text-center p-6 bg-brand-superlight rounded-xl card-hover">
                        <div class="flex items-center justify-center h-16 w-16 rounded-full bg-brand-light mx-auto text-3xl">üåç</div>
                        <h3 class="mt-5 text-xl font-semibold text-brand">B·ªÅn V·ªØng & √ù Th·ª©c</h3>
                        <p class="mt-2 text-gray-600">Bao b√¨ th√¢n thi·ªán m√¥i tr∆∞·ªùng, t√°i ch·∫ø ƒë∆∞·ª£c v√† ngu·ªìn nguy√™n li·ªáu khai th√°c c√≥ ƒë·∫°o ƒë·ª©c.</p>
                    </div>
                    <div class="text-center p-6 bg-brand-superlight rounded-xl card-hover">
                         <div class="flex items-center justify-center h-16 w-16 rounded-full bg-brand-light mx-auto text-3xl">üíñ</div>
                        <h3 class="mt-5 text-xl font-semibold text-brand">Minh B·∫°ch & ƒê·∫°o ƒê·ª©c</h3>
                        <p class="mt-2 text-gray-600">Cam k·∫øt 100% kh√¥ng th·ª≠ nghi·ªám tr√™n ƒë·ªông v·∫≠t v√† c√¥ng khai to√†n b·ªô th√†nh ph·∫ßn s·∫£n ph·∫©m.</p>
                    </div>
                     <div class="text-center p-6 bg-brand-superlight rounded-xl card-hover">
                        <div class="flex items-center justify-center h-16 w-16 rounded-full bg-brand-light mx-auto text-3xl">‚ú®</div>
                        <h3 class="mt-5 text-xl font-semibold text-brand">Hi·ªáu Su·∫•t V∆∞·ª£t Tr·ªôi</h3>
                        <p class="mt-2 text-gray-600">M√†u s·∫Øc r·ª±c r·ª°, l√¢u tr√¥i v√† ch·∫•t son m·ªÅm m·ªãn. V·∫ª ƒë·∫πp "s·∫°ch" kh√¥ng c√≥ nghƒ©a l√† ph·∫£i th·ªèa hi·ªáp.</p>
                    </div>
                </div>

                <div class="mt-20">
                    <div class="text-center">
                        <h3 class="text-2xl font-bold text-brand">So S√°nh Tr·ª±c Quan</h3>
                        <p class="mt-2 max-w-2xl mx-auto text-md text-gray-600">M·ªôt c√°i nh√¨n nhanh ƒë·ªÉ th·∫•y s·ª± kh√°c bi·ªát m√† S·∫Øc M·ªôc mang l·∫°i cho b·∫°n v√† cho h√†nh tinh.</p>
                    </div>
                    <div class="mt-8 chart-container">
                        <canvas id="comparisonChart"></canvas>
                    </div>
                </div>
            </div>
        </section>

        <section id="products" class="py-20 bg-brand-superlight">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="text-center">
                    <h2 class="text-3xl font-bold text-brand">Kh√°m Ph√° M√†u Son C·ªßa B·∫°n</h2>
                    <p class="mt-4 max-w-3xl mx-auto text-lg text-gray-600">T√¨m ki·∫øm s·∫Øc m√†u ho√†n h·∫£o ch∆∞a bao gi·ªù d·ªÖ d√†ng h∆°n. H√£y th·ª≠ ngay nh·ªØng gam m√†u l·∫•y c·∫£m h·ª©ng t·ª´ thi√™n nhi√™n c·ªßa ch√∫ng t√¥i.</p>
                </div>

                <div class="mt-16 grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-6 lg:gap-8" id="product-list">
                </div>

                <div class="mt-12 text-center">
                     <button id="open-vto-modal" class="bg-white text-brand font-bold py-3 px-8 rounded-full shadow-lg border border-brand-light hover:bg-brand-light hover:text-white transition-all transform hover:scale-105">
                        Tr·∫£i Nghi·ªám Th·ª≠ Son ·∫¢o (Live)
                    </button>
                </div>
            </div>
        </section>

        <section id="transparency" class="py-20 bg-white">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="text-center">
                    <h2 class="text-3xl font-bold text-brand">Trung T√¢m Minh B·∫°ch</h2>
                    <p class="mt-4 max-w-3xl mx-auto text-lg text-gray-600">Ch√∫ng t√¥i tin v√†o v·∫ª ƒë·∫πp kh√¥ng che gi·∫•u. Kh√°m ph√° c√¢u chuy·ªán ƒë·∫±ng sau m·ªói th√†nh ph·∫ßn l√†m n√™n th·ªèi son c·ªßa b·∫°n.</p>
                </div>
                <div id="ingredient-accordion" class="mt-12 max-w-3xl mx-auto space-y-4">
                </div>
            </div>
        </section>

        <section id="community" class="py-20 bg-brand-superlight">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="text-center">
                    <h2 class="text-3xl font-bold text-brand">C·ªông ƒê·ªìng S·∫Øc M·ªôc</h2>
                    <p class="mt-4 max-w-3xl mx-auto text-lg text-gray-600">Tham gia c√πng h√†ng ng√†n ph·ª• n·ªØ Vi·ªát ƒë√£ l·ª±a ch·ªçn v·∫ª ƒë·∫πp c√≥ √Ω th·ª©c. Chia s·∫ª kho·∫£nh kh·∫Øc c·ªßa b·∫°n v·ªõi #SacMocBeauty.</p>
                </div>
                <div class="mt-16 relative">
                    <div id="testimonial-slider" class="testimonial-container">
                    </div>
                    <button id="prev-testimonial" class="absolute left-0 top-1/2 transform -translate-y-1/2 -translate-x-1/2 bg-white/70 hover:bg-white text-brand p-3 rounded-full shadow-md z-10">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2.5" stroke="currentColor" class="w-6 h-6">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 19.5L8.25 12l7.5-7.5" />
                        </svg>
                    </button>
                    <button id="next-testimonial" class="absolute right-0 top-1/2 transform -translate-y-1/2 translate-x-1/2 bg-white/70 hover:bg-white text-brand p-3 rounded-full shadow-md z-10">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2.5" stroke="currentColor" class="w-6 h-6">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M8.25 4.5l7.5 7.5-7.5 7.5" />
                        </svg>
                    </button>
                </div>
            </div>
        </section>
    </main>

    <footer class="bg-gray-800 text-white py-12">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
            <h3 class="text-2xl font-bold">S·∫Øc M·ªôc</h3>
            <p class="mt-2">V·∫ª ƒê·∫πp C√≥ Tr√°ch Nhi·ªám</p>
            <div class="mt-6 flex justify-center space-x-6">
                <a href="#" class="hover:text-brand-light">Facebook</a>
                <a href="#" class="hover:text-brand-light">Instagram</a>
                <a href="#" class="hover:text-brand-light">Tiktok</a>
            </div>
            <p class="mt-6 text-sm text-gray-400">&copy; 2025 S·∫Øc M·ªôc Vi·ªát Nam. All rights reserved.</p>
        </div>
    </footer>

    <div id="vto-modal" class="fixed inset-0 bg-black bg-opacity-50 z-[60] hidden flex items-center justify-center p-4">
        <div class="bg-white rounded-lg shadow-xl p-6 w-full max-w-4xl relative transform transition-all duration-300 scale-95">
            <button id="close-vto-modal" class="absolute top-4 right-4 text-gray-500 hover:text-gray-800 z-10">&times;</button>
            <h3 class="text-2xl font-bold text-brand text-center mb-4">Tr·∫£i Nghi·ªám Th·ª≠ Son ·∫¢o</h3>
            <div class="grid md:grid-cols-2 gap-6 items-start">
                <div id="vto-video-container" class="bg-gray-200 rounded-lg flex items-center justify-center">
                    <video id="vto-video" playsinline autoplay muted class="rounded-lg"></video>
                    <canvas id="vto-canvas" class="rounded-lg"></canvas>
                    <p id="vto-status" class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 text-gray-600 bg-white/70 p-2 rounded">ƒêang t·∫£i model v√† kh·ªüi ƒë·ªông webcam...</p>
                </div>
                <div class="pt-4 md:pt-0">
                    <h4 class="font-semibold text-gray-700 mb-2">Ch·ªçn m√†u son c·ªßa b·∫°n:</h4>
                    <div id="vto-color-options" class="grid grid-cols-3 sm:grid-cols-4 gap-3">
                    </div>
                    <div class="mt-4 p-3 bg-amber-100 border-l-4 border-amber-500 text-amber-700 text-sm">
                        <p><strong>L∆∞u √Ω:</strong> ƒê·ªÉ c√≥ k·∫øt qu·∫£ t·ªët nh·∫•t, h√£y ƒë·∫£m b·∫£o khu√¥n m·∫∑t b·∫°n ƒë∆∞·ª£c chi·∫øu s√°ng ƒë·ªß v√† nh√¨n th·∫≥ng v√†o webcam.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const mobileMenuButton = document.getElementById('mobile-menu-button');
            const mobileMenu = document.getElementById('mobile-menu');

            mobileMenuButton.addEventListener('click', () => {
                mobileMenu.classList.toggle('hidden');
            });
            
            document.querySelectorAll('#mobile-menu a, header a[href^="#"]').forEach(link => {
                link.addEventListener('click', (e) => {
                    if (link.closest('#mobile-menu')) mobileMenu.classList.add('hidden');
                    const targetId = link.getAttribute('href');
                    if (targetId.startsWith('#')) {
                        e.preventDefault();
                        document.querySelector(targetId).scrollIntoView({ behavior: 'smooth'});
                    }
                });
            });

            const comparisonChartCtx = document.getElementById('comparisonChart').getContext('2d');
            new Chart(comparisonChartCtx, {
                type: 'bar',
                data: {
                    labels: ['Th√†nh Ph·∫ßn', 'Bao B√¨', 'Th·ª≠ Nghi·ªám ƒê·ªông V·∫≠t', 'Minh B·∫°ch Ngu·ªìn G·ªëc', 'Hi·ªáu Su·∫•t'],
                    datasets: [{
                        label: 'Son Truy·ªÅn Th·ªëng',
                        data: [4, 2, 3, 2, 8],
                        backgroundColor: '#D7CCC8',
                        borderColor: '#C8BDBA',
                        borderWidth: 1
                    }, {
                        label: 'S·∫Øc M·ªôc',
                        data: [9, 8, 10, 10, 9],
                        backgroundColor: '#8D6E63',
                        borderColor: '#795548',
                        borderWidth: 1
                    }]
                },
                options: {
                    indexAxis: 'y',
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {x: {beginAtZero: true,max: 10}, y: {ticks: {font: {size: 12}}}},
                    plugins: {legend: {position: 'top'}, tooltip: {callbacks: {label: (ctx) => `${ctx.dataset.label || ''}: ${ctx.parsed.x}/10 ƒëi·ªÉm`}}}
                }
            });

            const products = [
                { name: 'ƒê·ªè ƒê·∫•t - 01', color: '#B95C50', hexOpacity: 'B95C50B3', image: 'https://placehold.co/400x400/B95C50/FFFFFF?text=ƒê·ªè+ƒê·∫•t'},
                { name: 'Cam Ch√°y - 02', color: '#D87C4F', hexOpacity: 'D87C4FB3', image: 'https://placehold.co/400x400/D87C4F/FFFFFF?text=Cam+Ch√°y'},
                { name: 'H·ªìng ƒê√†o - 03', color: '#E48F82', hexOpacity: 'E48F82B3', image: 'https://placehold.co/400x400/E48F82/FFFFFF?text=H·ªìng+ƒê√†o'},
                { name: 'N√¢u G·ªó - 04', color: '#8C5A4D', hexOpacity: '8C5A4DB3', image: 'https://placehold.co/400x400/8C5A4D/FFFFFF?text=N√¢u+G·ªó'},
                { name: 'H·ªìng ƒê·∫•t - 05', color: '#C68582', hexOpacity: 'C68582B3', image: 'https://placehold.co/400x400/C68582/FFFFFF?text=H·ªìng+ƒê·∫•t'}
            ];

            const productList = document.getElementById('product-list');
            products.forEach(p => {
                productList.innerHTML += `
                    <div class="text-center group">
                        <div class="relative w-full aspect-w-1 aspect-h-1 bg-gray-200 rounded-lg overflow-hidden card-hover">
                            <img src="${p.image}" alt="${p.name}" class="w-full h-full object-center object-cover" onerror="this.src='https://placehold.co/400x400/EFEBE9/8D6E63?text=·∫¢nh+L·ªói'">
                        </div>
                        <h4 class="mt-4 font-semibold text-gray-800">${p.name}</h4>
                        <div class="w-6 h-6 rounded-full mx-auto mt-2 border border-gray-300" style="background-color: ${p.color};"></div>
                    </div>
                `;
            });

            const ingredientsData = [
                { name: 'D·∫ßu Jojoba H·ªØu C∆°', description: 'Gi√†u Vitamin E, ho·∫°t ƒë·ªông nh∆∞ m·ªôt ch·∫•t d∆∞·ª°ng ·∫©m t·ª± nhi√™n, gi√∫p m√¥i m·ªÅm m·∫°i v√† cƒÉng m·ªçng. Ngu·ªìn g·ªëc t·ª´ c√°c trang tr·∫°i h·ªØu c∆° b·ªÅn v·ªØng.' },
                { name: 'B∆° H·∫°t M·ª°', description: 'Cung c·∫•p ƒë·ªô ·∫©m s√¢u, l√†m d·ªãu v√† ph·ª•c h·ªìi ƒë√¥i m√¥i kh√¥, n·ª©t n·∫ª. ƒê∆∞·ª£c thu mua c√¥ng b·∫±ng t·ª´ c√°c h·ª£p t√°c x√£ ph·ª• n·ªØ ·ªü T√¢y Phi.' },
                { name: 'S√°p Candelilla', description: 'M·ªôt lo·∫°i s√°p th·ª±c v·∫≠t thay th·∫ø cho s√°p ong, t·∫°o ƒë·ªô c·ª©ng v√† b√≥ng cho son m√¥i. Thu ho·∫°ch t·ª´ c√¢y Candelilla ·ªü sa m·∫°c Chihuahuan.'},
                { name: 'M√†u Kho√°ng Thi√™n Nhi√™n', description: 'S·ª≠ d·ª•ng oxit s·∫Øt v√† mica ƒë∆∞·ª£c khai th√°c c√≥ ƒë·∫°o ƒë·ª©c thay cho thu·ªëc nhu·ªôm t·ªïng h·ª£p, ƒë·∫£m b·∫£o m√†u s·∫Øc an to√†n v√† r·ª±c r·ª°.'}
            ];

            const accordion = document.getElementById('ingredient-accordion');
            ingredientsData.forEach((ing) => {
                const item = document.createElement('div');
                item.className = 'border border-gray-200 rounded-lg overflow-hidden';
                item.innerHTML = `
                    <button class="accordion-button w-full text-left p-4 bg-brand-superlight hover:bg-brand-light transition duration-300 flex justify-between items-center">
                        <span class="font-semibold text-brand">${ing.name}</span>
                        <span class="accordion-icon text-brand font-bold">+</span>
                    </button>
                    <div class="accordion-content hidden p-4 bg-white">
                        <p class="text-gray-600">${ing.description}</p>
                    </div>
                `;
                accordion.appendChild(item);
            });
            
            accordion.addEventListener('click', function(e) {
                const button = e.target.closest('.accordion-button');
                if (button) {
                    const content = button.nextElementSibling;
                    const icon = button.querySelector('.accordion-icon');
                    const isHidden = content.classList.contains('hidden');
                    
                    document.querySelectorAll('#ingredient-accordion .accordion-content').forEach(c => c.classList.add('hidden'));
                    document.querySelectorAll('#ingredient-accordion .accordion-icon').forEach(i => i.textContent = '+');
                    
                    if (isHidden) {
                        content.classList.remove('hidden');
                        icon.textContent = '-';
                    }
                }
            });

            const testimonials = [
                { text: "L·∫ßn ƒë·∫ßu ti√™n m√¨nh t√¨m ƒë∆∞·ª£c m·ªôt th·ªèi son v·ª´a ƒë·∫πp, v·ª´a l√¢u tr√¥i m√† l·∫°i an t√¢m v·ªÅ th√†nh ph·∫ßn. Y√™u S·∫Øc M·ªôc!", author: "An Nhi√™n, TP.HCM" },
                { text: "M√¨nh ƒëang mang thai n√™n r·∫•t k·ªπ t√≠nh. S·∫Øc M·ªôc l√† c·ª©u tinh, gi√∫p m√¨nh v·∫´n xinh ƒë·∫πp m√† kh√¥ng lo ·∫£nh h∆∞·ªüng ƒë·∫øn b√©.", author: "Minh Th∆∞, H√† N·ªôi" },
                { text: "Th√≠ch nh·∫•t l√† bao b√¨! V·ª´a ƒë·∫πp v·ª´a th√¢n thi·ªán m√¥i tr∆∞·ªùng. M·ªôt th∆∞∆°ng hi·ªáu Vi·ªát Nam qu√° t·ª± h√†o.", author: "Qu·ª≥nh Anh, ƒê√† N·∫µng" },
                { text: "M√†u son l√™n chu·∫©n, ch·∫•t son m·ªÅm m·ªãn kh√¥ng g√¢y kh√¥ m√¥i. S·∫Ω ·ªßng h·ªô S·∫Øc M·ªôc d√†i d√†i.", author: "Ng·ªçc H√†, H·∫£i Ph√≤ng" },
                { text: "T√¨m ki·∫øm m√£i m·ªõi ƒë∆∞·ª£c m·ªôt brand son 's·∫°ch' ƒë√∫ng nghƒ©a. R·∫•t h√†i l√≤ng v·ªõi ch·∫•t l∆∞·ª£ng s·∫£n ph·∫©m.", author: "Thu Trang, C·∫ßn Th∆°" },
                { text: "T·ª´ ng√†y d√πng S·∫Øc M·ªôc, m√¨nh kh√¥ng c√≤n lo l·∫Øng v·ªÅ ch√¨ hay h√≥a ch·∫•t ƒë·ªôc h·∫°i n·ªØa. C·∫£m ∆°n th∆∞∆°ng hi·ªáu!", author: "Ph∆∞∆°ng Vy, B√¨nh D∆∞∆°ng" }
            ];
            const testimonialSlider = document.getElementById('testimonial-slider');
            testimonials.forEach(t => {
                const card = document.createElement('div');
                card.className = 'testimonial-card p-4 md:p-6';
                card.innerHTML = `<div class="bg-white p-6 rounded-xl shadow-sm text-center h-full flex flex-col justify-center card-hover"><p class="text-gray-600 italic text-lg">"${t.text}"</p><h4 class="mt-4 font-bold text-brand">- ${t.author}</h4></div>`;
                testimonialSlider.appendChild(card);
            });
            const prevTestimonialBtn = document.getElementById('prev-testimonial');
            const nextTestimonialBtn = document.getElementById('next-testimonial');
            let currentTestimonialIndex = 0;
            function getVisibleCardsCount() { return window.innerWidth >= 1024 ? 3 : (window.innerWidth >= 768 ? 2 : 1); }
            function showTestimonials() {
                const cardWidth = testimonialSlider.querySelector('.testimonial-card').offsetWidth;
                testimonialSlider.style.transform = `translateX(-${currentTestimonialIndex * cardWidth}px)`;
                prevTestimonialBtn.disabled = currentTestimonialIndex === 0;
                nextTestimonialBtn.disabled = currentTestimonialIndex >= testimonials.length - getVisibleCardsCount();
            }
            nextTestimonialBtn.addEventListener('click', () => { if (currentTestimonialIndex < testimonials.length - getVisibleCardsCount()) currentTestimonialIndex++; showTestimonials(); });
            prevTestimonialBtn.addEventListener('click', () => { if (currentTestimonialIndex > 0) currentTestimonialIndex--; showTestimonials(); });
            window.addEventListener('resize', () => { currentTestimonialIndex = 0; showTestimonials(); });
            showTestimonials();


            // VTO Enhanced Logic
            const vtoModal = document.getElementById('vto-modal');
            const openVtoModalBtn = document.getElementById('open-vto-modal');
            const closeVtoModalBtn = document.getElementById('close-vto-modal');
            const vtoVideo = document.getElementById('vto-video');
            const vtoCanvas = document.getElementById('vto-canvas');
            const vtoCtx = vtoCanvas.getContext('2d');
            const vtoColorOptions = document.getElementById('vto-color-options');
            const vtoStatus = document.getElementById('vto-status');

            let faceLandmarksModel;
            let currentLipColor = 'rgba(185, 92, 80, 0.7)'; // Default color with opacity
            let videoStream;
            let animationFrameId;

            const LIP_LANDMARKS = {
                // These are approximate indices for MediaPipe Facemesh for outer and inner lips.
                // You may need to fine-tune these for precise lip shapes.
                // Outer contour for a fuller lip area
                upperOuter: [61, 185, 40, 39, 37, 0, 267, 269, 270, 409, 291, 321, 314, 17, 84, 181, 91, 146],
                lowerOuter: [61, 146, 91, 181, 84, 17, 314, 405, 321, 375, 291, 409, 270, 269, 267, 0, 37, 39, 40, 185], // This forms a complete loop for both lips.
                // Or more detailed approach:
                lipsUpperOutline: [72, 73, 74, 76, 77, 61, 185, 40, 39, 37, 0, 267, 269, 270, 409, 291, 307, 306, 304, 303, 302],
                lipsLowerOutline: [72, 73, 74, 76, 77, 91, 181, 84, 17, 314, 405, 321, 375, 291, 307, 306, 304, 303, 302], // Needs to be closed path
                // For filling, sometimes drawing upper and lower separately looks better
                upperLip: [61,185,40,39,37,0,267,269,270,409,291,308,415,310,311,312,13,82,81,80,191,78],
                lowerLip: [61,146,91,181,84,17,314,405,321,375,291,324,318,402,317,14,87,178,88,95,78]
            };


            async function setupWebcam() {
                try {
                    videoStream = await navigator.mediaDevices.getUserMedia({ video: { facingMode: 'user' }, audio: false });
                    vtoVideo.srcObject = videoStream;
                    return new Promise((resolve) => {
                        vtoVideo.onloadedmetadata = () => resolve(true);
                    });
                } catch (err) {
                    console.error("Error accessing webcam:", err);
                    vtoStatus.textContent = "Kh√¥ng th·ªÉ truy c·∫≠p webcam. Vui l√≤ng c·∫•p quy·ªÅn.";
                    return false;
                }
            }

            async function loadFaceLandmarksModel() {
                vtoStatus.textContent = "ƒêang t·∫£i model AI...";
                try {
                    await tf.setBackend('webgl'); // Or 'wasm' or 'cpu'
                    faceLandmarksModel = await faceLandmarksDetection.load(
                        faceLandmarksDetection.SupportedPackages.mediapipeFacemesh,
                        { maxFaces: 1, shouldLoadIrisModel: false } // Optimize, no iris needed
                    );
                    vtoStatus.textContent = "Model ƒë√£ s·∫µn s√†ng. ƒêang ch·ªù webcam...";
                } catch (error) {
                     console.error("Error loading model:", error);
                     vtoStatus.textContent = "L·ªói t·∫£i model AI.";
                }
            }
            
            function hexToRgba(hex, alpha = 0.7) { // Default alpha 0.7
                const r = parseInt(hex.slice(1, 3), 16);
                const g = parseInt(hex.slice(3, 5), 16);
                const b = parseInt(hex.slice(5, 7), 16);
                return `rgba(${r}, ${g}, ${b}, ${alpha})`;
            }

            function drawLipstick(predictions) {
                vtoCtx.clearRect(0, 0, vtoCanvas.width, vtoCanvas.height);
                if (predictions && predictions.length > 0) {
                    const keypoints = predictions[0].scaledMesh; // scaledMesh are 3D points
                    
                    vtoCtx.fillStyle = currentLipColor;
                    
                    // Draw upper lip
                    vtoCtx.beginPath();
                    const upperLipPoints = LIP_LANDMARKS.upperLip.map(idx => ({x: keypoints[idx][0], y: keypoints[idx][1]}));
                    vtoCtx.moveTo(upperLipPoints[0].x, upperLipPoints[0].y);
                    for (let i = 1; i < upperLipPoints.length; i++) {
                        vtoCtx.lineTo(upperLipPoints[i].x, upperLipPoints[i].y);
                    }
                    vtoCtx.closePath();
                    vtoCtx.fill();

                    // Draw lower lip
                    vtoCtx.beginPath();
                    const lowerLipPoints = LIP_LANDMARKS.lowerLip.map(idx => ({x: keypoints[idx][0], y: keypoints[idx][1]}));
                    vtoCtx.moveTo(lowerLipPoints[0].x, lowerLipPoints[0].y);
                    for (let i = 1; i < lowerLipPoints.length; i++) {
                        vtoCtx.lineTo(lowerLipPoints[i].x, lowerLipPoints[i].y);
                    }
                    vtoCtx.closePath();
                    vtoCtx.fill();
                    vtoStatus.style.display = 'none'; // Hide status if face detected
                } else {
                    vtoStatus.textContent = "Kh√¥ng t√¨m th·∫•y khu√¥n m·∫∑t.";
                    vtoStatus.style.display = 'block';
                }
            }

            async function detectionLoop() {
                if (faceLandmarksModel && vtoVideo.readyState >= HTMLMediaElement.HAVE_ENOUGH_DATA) {
                    const predictions = await faceLandmarksModel.estimateFaces({ input: vtoVideo });
                    drawLipstick(predictions);
                }
                animationFrameId = requestAnimationFrame(detectionLoop);
            }

            async function startVTO() {
                if (!faceLandmarksModel) {
                    await loadFaceLandmarksModel();
                    if (!faceLandmarksModel) return; // Stop if model failed to load
                }
                
                const webcamReady = await setupWebcam();
                if (!webcamReady) return;

                vtoVideo.play();
                vtoCanvas.width = vtoVideo.videoWidth;
                vtoCanvas.height = vtoVideo.videoHeight;
                
                vtoStatus.textContent = "ƒêang nh·∫≠n di·ªán...";
                detectionLoop();
            }

            function stopVTO() {
                if (animationFrameId) {
                    cancelAnimationFrame(animationFrameId);
                    animationFrameId = null;
                }
                if (videoStream) {
                    videoStream.getTracks().forEach(track => track.stop());
                    videoStream = null;
                }
                vtoVideo.srcObject = null;
                vtoCtx.clearRect(0, 0, vtoCanvas.width, vtoCanvas.height);
                vtoStatus.textContent = "ƒêang t·∫£i model v√† kh·ªüi ƒë·ªông webcam..."; // Reset status
                vtoStatus.style.display = 'block';
            }

            openVtoModalBtn.addEventListener('click', () => {
                vtoModal.classList.remove('hidden');
                 setTimeout(() => vtoModal.querySelector('div').classList.remove('scale-95'), 10);
                startVTO();
            });

            closeVtoModalBtn.addEventListener('click', () => {
                vtoModal.querySelector('div').classList.add('scale-95');
                setTimeout(() => vtoModal.classList.add('hidden'), 300);
                stopVTO();
            });
            
            vtoModal.addEventListener('click', function(e) { // Close on overlay click
                if(e.target === vtoModal){
                    closeVtoModalBtn.click();
                }
            });

            products.forEach(p => {
                const colorBtn = document.createElement('button');
                colorBtn.className = 'vto-color-btn w-full h-12 sm:h-16 rounded-lg border-2 border-transparent hover:border-brand focus:border-brand focus:ring-2 focus:ring-brand-light outline-none';
                colorBtn.style.backgroundColor = p.color;
                colorBtn.dataset.color = p.color;
                colorBtn.setAttribute('aria-label', `Th·ª≠ m√†u ${p.name}`);
                colorBtn.addEventListener('click', () => {
                    currentLipColor = hexToRgba(p.color, 0.6); // Using 0.6 alpha for blending
                     document.querySelectorAll('.vto-color-btn').forEach(btn => btn.classList.remove('ring-2', 'ring-brand'));
                     colorBtn.classList.add('ring-2', 'ring-brand');
                });
                vtoColorOptions.appendChild(colorBtn);
            });

            const firstColorButton = vtoColorOptions.firstElementChild;
            if (firstColorButton) { 
                 firstColorButton.click();
            }
        });
    </script>
</body>
</html>
