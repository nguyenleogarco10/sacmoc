<!DOCTYPE html>
<html lang="vi" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>S·∫Øc M·ªôc - V·∫ª ƒê·∫πp C√≥ Tr√°ch Nhi·ªám</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs-core@3.18.0/dist/tf-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs-converter@3.18.0/dist/tf-converter.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow-models/face-landmarks-detection@1.0.2/dist/face-landmarks-detection.min.js"></script>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <!-- Updated font to be more in harmony with the logo - 'Merriweather Sans' for headings and 'Open Sans' for body text -->
    <link href="https://fonts.googleapis.com/css2?family=Merriweather+Sans:wght@700&family=Open+Sans:wght@400;600&display=swap" rel="stylesheet">
    <style>
        body {
            /* Changed font-family to Open Sans for general text */
            font-family: 'Open Sans', sans-serif;
            /* Updated background-color to a warm beige */
            background-color: #F8F4E3; 
            color: #4A4A4A;
        }
        /* New custom class for headings to use Merriweather Sans */
        .font-heading {
            font-family: 'Merriweather Sans', sans-serif;
        }
        /* Updated brand colors to be closer to the logo's green/brown tones */
        .text-brand { color: #5D7A4D; } /* A darker, earthy green */
        .bg-brand { background-color: #5D7A4D; }
        .bg-brand-light { background-color: #A2B99C; } /* A lighter green */
        .bg-brand-superlight { background-color: #E6EDE4; } /* Very light green */
        .border-brand { border-color: #5D7A4D; }
        
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
            height: 400px;
            max-height: 50vh;
        }
        @media (max-width: 768px) {
            .chart-container {
                height: 500px;
                max-height: 70vh;
            }
        }
        .nav-link {
            transition: color 0.3s ease;
        }
        .nav-link:hover {
            color: #5D7A4D; /* Updated hover color */
        }
        .card-hover {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .card-hover:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.05), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
        .testimonial-container {
            display: flex;
            overflow-x: hidden;
            scroll-snap-type: x mandatory;
            -webkit-overflow-scrolling: touch;
        }
        .testimonial-card {
            flex: 0 0 100%;
            scroll-snap-align: start;
            transition: transform 0.5s ease-in-out;
        }
         @media (min-width: 768px) {
            .testimonial-card {
                flex: 0 0 50%;
            }
        }
        @media (min-width: 1024px) {
            .testimonial-card {
                flex: 0 0 33.3333%;
            }
        }
        #vto-video-container {
            position: relative;
            width: 100%;
            max-width: 500px; /* Control max size */
            margin: auto;
            aspect-ratio: 4 / 3; /* Maintain aspect ratio */
        }
        #vto-video, #vto-canvas {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border-radius: 0.5rem; /* Tailwind's rounded-lg */
            object-fit: cover; /* Ensure video covers the area */
        }
         #vto-video {
            transform: scaleX(-1); /* Mirror mode for webcam */
        }
        #vto-canvas {
            pointer-events: none; /* Allow interaction with elements below if any */
        }
    </style>
</head>
<body class="antialiased">

    <header id="header" class="bg-white/80 backdrop-blur-md relative top-0 left-0 right-0 z-50 shadow-sm">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <!-- Adjusted header height to accommodate a larger logo -->
            <!-- Height of header increased to h-36 to allow for a larger logo -->
            <div class="flex justify-between items-center h-36"> 
                <div class="flex-shrink-0 flex items-center">
                    <!-- Increased logo size -->
                    <!-- Logo image height increased to h-32 to make it more prominent -->
                    <a href="#hero" class="flex items-center">
                        <img src="Logo.png" alt="S·∫Øc M·ªôc Logo" class="h-32 w-auto"> <!-- Adjust h-32 as needed for size -->
                    </a>
                </div>
                <div class="hidden md:block">
                    <nav class="flex items-center space-x-8">
                        <a href="#philosophy" class="text-gray-600 nav-link font-medium">Tri·∫øt L√Ω</a>
                        <a href="#products" class="text-gray-600 nav-link font-medium">S·∫£n Ph·∫©m</a>
                        <a href="#transparency" class="text-gray-600 nav-link font-medium">Minh B·∫°ch</a>
                        <a href="#community" class="text-gray-600 nav-link font-medium">C·ªông ƒê·ªìng</a>
                    </nav>
                </div>
                 <div class="md:hidden">
                    <button id="mobile-menu-button" class="text-gray-600 hover:text-brand focus:outline-none">
                        <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7" />
                        </svg>
                    </button>
                </div>
            </div>
        </div>
        <div id="mobile-menu" class="md:hidden hidden">
            <nav class="px-2 pt-2 pb-3 space-y-1 sm:px-3">
                <a href="#philosophy" class="block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-brand hover:bg-gray-50">Tri·∫øt L√Ω</a>
                <a href="#products" class="block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-brand hover:bg-gray-50">S·∫£n Ph·∫©m</a>
                <a href="#transparency" class="block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-brand hover:bg-gray-50">Minh B·∫°ch</a>
                <a href="#community" class="block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-brand hover:bg-gray-50">C·ªông ƒê·ªìng</a>
            </nav>
        </div>
    </header>

    <main>
        <section id="hero" class="pt-16 h-screen flex items-center bg-cover bg-center" style="background-image: url('https://images.unsplash.com/photo-1590431305265-538183495a43?q=80&w=2070&auto=format&fit=crop');">
            <div class="absolute inset-0 bg-white/50"></div>
            <div class="relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
                <h1 class="text-4xl md:text-6xl font-extrabold text-brand tracking-tight font-heading">V·∫ª ƒê·∫πp C√≥ Tr√°ch Nhi·ªám</h1> <!-- Applied font-heading here -->
                <p class="mt-4 max-w-2xl mx-auto text-lg md:text-xl text-gray-700">S·∫Øc M·ªôc kh√¥ng ch·ªâ l√† son m√¥i. ƒê√≥ l√† m·ªôt l·ª±a ch·ªçn an to√†n cho b·∫°n, t·ª≠ t·∫ø v·ªõi h√†nh tinh v√† cam k·∫øt cho m·ªôt v·∫ª ƒë·∫πp minh b·∫°ch.</p>
                <div class="mt-8">
                    <a href="#philosophy" class="inline-block bg-brand text-white font-bold py-3 px-8 rounded-full shadow-lg hover:bg-opacity-90 transition-transform transform hover:scale-105">Kh√°m Ph√°m C√¢u Chuy·ªán</a>
                </div>
            </div>
        </section>

        <section id="philosophy" class="py-20 bg-white">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="text-center">
                    <h2 class="text-3xl font-bold text-brand font-heading">Tri·∫øt L√Ω S·∫Øc M·ªôc</h2> <!-- Applied font-heading here -->
                    <p class="mt-4 max-w-3xl mx-auto text-lg text-gray-600">Ch√∫ng t√¥i ra ƒë·ªùi ƒë·ªÉ gi·∫£i quy·∫øt nh·ªØng lo ng·∫°i v·ªÅ s·ª©c kh·ªèe v√† m√¥i tr∆∞·ªùng trong ng√†nh m·ªπ ph·∫©m. S·∫Øc M·ªôc l√† c√¢u tr·∫£ l·ªùi cho nhu c·∫ßu v·ªÅ m·ªôt v·∫ª ƒë·∫πp kh√¥ng ch·ªâ r·∫°ng r·ª° b√™n ngo√†i m√† c√≤n an t√¢m t·ª´ b√™n trong.</p>
                </div>
                <div class="mt-16 grid gap-10 md:grid-cols-2 lg:grid-cols-4">
                    <div class="text-center p-6 bg-brand-superlight rounded-xl card-hover">
                        <div class="flex items-center justify-center h-16 w-16 rounded-full bg-brand-light mx-auto text-3xl">üåø</div>
                        <h3 class="mt-5 text-xl font-semibold text-brand font-heading">An To√†n & Tinh Khi·∫øt</h3> <!-- Applied font-heading here -->
                        <p class="mt-2 text-gray-600">C√¥ng th·ª©c v·ªõi h∆°n 95% th√†nh ph·∫ßn t·ª± nhi√™n, kh√¥ng ch·ª©a kim lo·∫°i n·∫∑ng, parabens hay h√≥a ch·∫•t ƒë·ªôc h·∫°i.</p>
                    </div>
                    <div class="text-center p-6 bg-brand-superlight rounded-xl card-hover">
                        <div class="flex items-center justify-center h-16 w-16 rounded-full bg-brand-light mx-auto text-3xl">üåç</div>
                        <h3 class="mt-5 text-xl font-semibold text-brand font-heading">B·ªÅn V·ªØng & √ù Th·ª©c</h3> <!-- Applied font-heading here -->
                        <p class="mt-2 text-gray-600">Bao b√¨ th√¢n thi·ªán m√¥i tr∆∞·ªùng, t√°i ch·∫ø ƒë∆∞·ª£c v√† ngu·ªìn nguy√™n li·ªáu khai th√°c c√≥ ƒë·∫°o ƒë·ª©c.</p>
                    </div>
                    <div class="text-center p-6 bg-brand-superlight rounded-xl card-hover">
                         <div class="flex items-center justify-center h-16 w-16 rounded-full bg-brand-light mx-auto text-3xl">üíñ</div>
                        <h3 class="mt-5 text-xl font-semibold text-brand font-heading">Minh B·∫°ch & ƒê·∫°o ƒê·ª©c</h3> <!-- Applied font-heading here -->
                        <p class="mt-2 text-gray-600">Cam k·∫øt 100% kh√¥ng th·ª≠ nghi·ªám tr√™n ƒë·ªông v·∫≠t v√† c√¥ng khai to√†n b·ªô th√†nh ph·∫ßn s·∫£n ph·∫©m.</p>
                    </div>
                     <div class="text-center p-6 bg-brand-superlight rounded-xl card-hover">
                        <div class="flex items-center justify-center h-16 w-16 rounded-full bg-brand-light mx-auto text-3xl">‚ú®</div>
                        <h3 class="mt-5 text-xl font-semibold text-brand font-heading">Hi·ªáu Su·∫•t V∆∞·ª£t Tr·ªôi</h3> <!-- Applied font-heading here -->
                        <p class="mt-2 text-gray-600">M√†u s·∫Øc r·ª±c r·ª°, l√¢u tr√¥i v√† ch·∫•t son m·ªÅm m·ªãn. V·∫ª ƒë·∫πp "s·∫°ch" kh√¥ng c√≥ nghƒ©a l√† ph·∫£i th·ªèa hi·ªáp.</p>
                    </div>
                </div>

                <div class="mt-20">
                    <div class="text-center">
                        <h3 class="text-2xl font-bold text-brand font-heading">So S√°nh Tr·ª±c Quan</h3> <!-- Applied font-heading here -->
                        <p class="mt-2 max-w-2xl mx-auto text-md text-gray-600">M·ªôt c√°i nh√¨n nhanh ƒë·ªÉ th·∫•y s·ª± kh√°c bi·ªát m√† S·∫Øc M·ªôc mang l·∫°i cho b·∫°n v√† cho h√†nh tinh.</p>
                    </div>
                    <div class="mt-8 chart-container">
                        <canvas id="comparisonChart"></canvas>
                    </div>
                </div>
            </div>
        </section>

        <section id="products" class="py-20 bg-brand-superlight">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="text-center">
                    <h2 class="text-3xl font-bold text-brand font-heading">Kh√°m Ph√° M√†u Son C·ªßa B·∫°n</h2> <!-- Applied font-heading here -->
                    <p class="mt-4 max-w-3xl mx-auto text-lg text-gray-600">T√¨m ki·∫øm s·∫Øc m√†u ho√†n h·∫£o ch∆∞a bao gi·ªù d·ªÖ d√†ng h∆°n. H√£y th·ª≠ ngay nh·ªØng gam m√†u l·∫•y c·∫£m h·ª©ng t·ª´ thi√™n nhi√™n c·ªßa ch√∫ng t√¥i.</p>
                </div>

                <div class="mt-16 grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-6 lg:gap-8" id="product-list">
                    </div>

                <div class="mt-12 text-center">
                     <a href="thu_son_ao.html" class="inline-block bg-white text-brand font-bold py-3 px-8 rounded-full shadow-lg border border-brand-light hover:bg-brand-light hover:text-white transition-all transform hover:scale-105">
                        Tr·∫£i Nghi·ªám Th·ª≠ Son ·∫¢o (Live)
                    </a>
                </div>
            </div>
        </section>

        <section id="transparency" class="py-20 bg-white">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="text-center">
                    <h2 class="text-3xl font-bold text-brand font-heading">Trung T√¢m Minh B·∫°ch</h2> <!-- Applied font-heading here -->
                    <p class="mt-4 max-w-3xl mx-auto text-lg text-gray-600">Ch√∫ng t√¥i tin v√†o v·∫ª ƒë·∫πp kh√¥ng che gi·∫•u. Kh√°m ph√° c√¢u chuy·ªán ƒë·∫±ng sau m·ªói th√†nh ph·∫ßn l√†m n√™n th·ªèi son c·ªßa b·∫°n.</p>
                </div>
                <div id="ingredient-accordion" class="mt-12 max-w-3xl mx-auto space-y-4">
                    </div>
            </div>
        </section>

        <section id="community" class="py-20 bg-brand-superlight">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="text-center">
                    <h2 class="text-3xl font-bold text-brand font-heading">C·ªông ƒê·ªìng S·∫Øc M·ªôc</h2> <!-- Applied font-heading here -->
                    <p class="mt-4 max-w-3xl mx-auto text-lg text-gray-600">Tham gia c√πng h√†ng ng√†n ph·ª• n·ªØ Vi·ªát ƒë√£ l·ª±a ch·ªçn v·∫ª ƒë·∫πp c√≥ √Ω th·ª©c. Chia s·∫ª kho·∫£nh kh·∫Øc c·ªßa b·∫°n v·ªõi #SacMocBeauty.</p>
                </div>
                <div class="mt-16 relative">
                    <div id="testimonial-slider" class="testimonial-container">
                        </div>
                    <button id="prev-testimonial" class="absolute left-0 top-1/2 transform -translate-y-1/2 -translate-x-1/2 bg-white/70 hover:bg-white text-brand p-3 rounded-full shadow-md z-10">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2.5" stroke="currentColor" class="w-6 h-6">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 19.5L8.25 12l7.5-7.5" />
                        </svg>
                    </button>
                    <button id="next-testimonial" class="absolute right-0 top-1/2 transform -translate-y-1/2 translate-x-1/2 bg-white/70 hover:bg-white text-brand p-3 rounded-full shadow-md z-10">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2.5" stroke="currentColor" class="w-6 h-6">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M8.25 4.5l7.5 7.5-7.5 7.5" />
                        </svg>
                    </button>
                </div>
            </div>
        </section>
    </main>

    <footer class="bg-gray-800 text-white py-12">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
            <h3 class="text-2xl font-bold font-heading">S·∫Øc M·ªôc</h3> <!-- Applied font-heading here -->
            <p class="mt-2">V·∫ª ƒê·∫πp C√≥ Tr√°ch Nhi·ªám</p>
            <div class="mt-6 flex justify-center space-x-6">
                <a href="#" class="hover:text-brand-light">Facebook</a>
                <a href="#" class="hover:text-brand-light">Instagram</a>
                <a href="#" class="hover:text-brand-light">Tiktok</a>
            </div>
            <p class="mt-6 text-sm text-gray-400">&copy; 2025 S·∫Øc M·ªôc Vi·ªát Nam. All rights reserved.</p>
        </div>
    </footer>

    <div id="vto-modal" class="fixed inset-0 bg-black bg-opacity-50 z-[60] hidden flex items-center justify-center p-4">
        <div class="bg-white rounded-lg shadow-xl p-6 w-full max-w-4xl relative transform transition-all duration-300 scale-95">
            <button id="close-vto-modal" class="absolute top-4 right-4 text-gray-500 hover:text-gray-800 z-10">&times;</button>
            <h3 class="text-2xl font-bold text-brand text-center mb-4 font-heading">Tr·∫£i Nghi·ªám Th·ª≠ Son ·∫¢o</h3> <!-- Applied font-heading here -->
            <div class="grid md:grid-cols-2 gap-6 items-start">
                <div id="vto-video-container" class="bg-gray-200 rounded-lg flex items-center justify-center">
                    <video id="vto-video" playsinline autoplay muted class="rounded-lg"></video>
                    <canvas id="vto-canvas" class="rounded-lg"></canvas>
                    <p id="vto-status" class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 text-gray-600 bg-white/70 p-2 rounded">ƒêang t·∫£i model v√† kh·ªüi ƒë·ªông webcam...</p>
                </div>
                <div class="pt-4 md:pt-0">
                    <h4 class="font-semibold text-gray-700 mb-2">Ch·ªçn m√†u son c·ªßa b·∫°n:</h4>
                    <div id="vto-color-options" class="grid grid-cols-3 sm:grid-cols-4 gap-3">
                        </div>
                    <div class="mt-4 p-3 bg-amber-100 border-l-4 border-amber-500 text-amber-700 text-sm">
                        <p><strong>L∆∞u √Ω:</strong> ƒê·ªÉ c√≥ k·∫øt qu·∫£ t·ªët nh·∫•t, h√£y ƒë·∫£m b·∫£o khu√¥n m·∫∑t b·∫°n ƒë∆∞·ª£c chi·∫øu s√°ng ƒë·ªß v√† nh√¨n th·∫≥ng v√†o webcam.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Mobile menu toggle
            const mobileMenuButton = document.getElementById('mobile-menu-button');
            const mobileMenu = document.getElementById('mobile-menu');

            mobileMenuButton.addEventListener('click', () => {
                mobileMenu.classList.toggle('hidden');
            });
            
            // Smooth scroll for anchor links and close mobile menu on click
            document.querySelectorAll('#mobile-menu a, header a[href^="#"]').forEach(link => {
                link.addEventListener('click', (e) => {
                    if (link.closest('#mobile-menu')) mobileMenu.classList.add('hidden'); // Close mobile menu
                    const targetId = link.getAttribute('href');
                    if (targetId.startsWith('#')) { // Check if it's an anchor link
                        e.preventDefault();
                        document.querySelector(targetId).scrollIntoView({ behavior: 'smooth'});
                    }
                    // If it's not an anchor link (e.g., href="thu_son_ao.html"), let the default behavior happen
                });
            });

            // Comparison Chart
            const comparisonChartCtx = document.getElementById('comparisonChart').getContext('2d');
            new Chart(comparisonChartCtx, {
                type: 'bar',
                data: {
                    labels: ['Th√†nh Ph·∫ßn', 'Bao B√¨', 'Th·ª≠ Nghi·ªám ƒê·ªông V·∫≠t', 'Minh B·∫°ch Ngu·ªìn G·ªëc', 'Hi·ªáu Su·∫•t'],
                    datasets: [{
                        label: 'Son Truy·ªÅn Th·ªëng',
                        data: [4, 2, 3, 2, 8], // Example scores
                        backgroundColor: '#A2B99C', // bg-brand-light
                        borderColor: '#8CA786',
                        borderWidth: 1
                    }, {
                        label: 'S·∫Øc M·ªôc',
                        data: [9, 8, 10, 10, 9], // Example scores for Sac Moc
                        backgroundColor: '#5D7A4D', // bg-brand
                        borderColor: '#4D643E',
                        borderWidth: 1
                    }]
                },
                options: {
                    indexAxis: 'y', // Horizontal bar chart
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        x: {
                            beginAtZero: true,
                            max: 10 // Assuming scores are out of 10
                        },
                        y: {
                            ticks: {
                                font: {
                                    size: 12 // Adjust font size if needed
                                }
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            position: 'top',
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    let label = context.dataset.label || '';
                                    if (label) {
                                        label += ': ';
                                    }
                                    if (context.parsed.x !== null) {
                                        label += context.parsed.x + '/10 ƒëi·ªÉm';
                                    }
                                    return label;
                                }
                            }
                        }
                    }
                }
            });

            // Products Data
            const products = [
                { name: 'ƒê·ªè ƒê·∫•t - 01', color: '#B95C50', hexOpacity: 'B95C50B3', image: 'https://placehold.co/400x400/B95C50/FFFFFF?text=ƒê·ªè+ƒê·∫•t'},
                { name: 'Cam Ch√°y - 02', color: '#D87C4F', hexOpacity: 'D87C4FB3', image: 'https://placehold.co/400x400/D87C4F/FFFFFF?text=Cam+Ch√°y'},
                { name: 'H·ªìng ƒê√†o - 03', color: '#E48F82', hexOpacity: 'E48F82B3', image: 'https://placehold.co/400x400/E48F82/FFFFFF?text=H·ªìng+ƒê√†o'},
                { name: 'N√¢u G·ªó - 04', color: '#8C5A4D', hexOpacity: '8C5A4DB3', image: 'https://placehold.co/400x400/8C5A4D/FFFFFF?text=N√¢u+G·ªó'},
                { name: 'H·ªìng ƒê·∫•t - 05', color: '#C68582', hexOpacity: 'C68582B3', image: 'https://placehold.co/400x400/C68582/FFFFFF?text=H·ªìng+ƒê·∫•t'}
            ];

            // Populate Product List
            const productList = document.getElementById('product-list');
            products.forEach(p => {
                productList.innerHTML += `
                    <div class="text-center group">
                        <div class="relative w-full aspect-w-1 aspect-h-1 bg-gray-200 rounded-lg overflow-hidden card-hover">
                            <img src="${p.image}" alt="${p.name}" class="w-full h-full object-center object-cover" onerror="this.src='https://placehold.co/400x400/EFEBE9/8D6E63?text=·∫¢nh+L·ªói'">
                        </div>
                        <h4 class="mt-4 font-semibold text-gray-800">${p.name}</h4>
                        <div class="w-6 h-6 rounded-full mx-auto mt-2 border border-gray-300" style="background-color: ${p.color};"></div>
                    </div>
                `;
            });

            // Ingredients Accordion Data
            const ingredientsData = [
                { name: 'D·∫ßu Jojoba H·ªØu C∆°', description: 'Gi√†u Vitamin E, ho·∫°t ƒë·ªông nh∆∞ m·ªôt ch·∫•t d∆∞·ª°ng ·∫©m t·ª± nhi√™n, gi√∫p m√¥i m·ªÅm m·∫°i v√† cƒÉng m·ªçng. Ngu·ªìn g·ªëc t·ª´ c√°c trang tr·∫°i h·ªØu c∆° b·ªÅn v·ªØng.' },
                { name: 'B∆° H·∫°t M·ª°', description: 'Cung c·∫•p ƒë·ªô ·∫©m s√¢u, l√†m d·ªãu v√† ph·ª•c h·ªìi ƒë√¥i m√¥i kh√¥, n·ª©t n·∫ª. ƒê∆∞·ª£c thu mua c√¥ng b·∫±ng t·ª´ c√°c h·ª£p t√°c x√£ ph·ª• n·ªØ ·ªü T√¢y Phi.' },
                { name: 'S√°p Candelilla', description: 'M·ªôt lo·∫°i s√°p th·ª±c v·∫≠t thay th·∫ø cho s√°p ong, t·∫°o ƒë·ªô c·ª©ng v√† b√≥ng cho son m√¥i. Thu ho·∫°ch t·ª´ c√¢y Candelilla ·ªü sa m·∫°c Chihuahuan.'},
                { name: 'M√†u Kho√°ng Thi√™n Nhi√™n', description: 'S·ª≠ d·ª•ng oxit s·∫Øt v√† mica ƒë∆∞·ª£c khai th√°c c√≥ ƒë·∫°o ƒë·ª©c thay cho thu·ªëc nhu·ªôm t·ªïng h·ª£p, ƒë·∫£m b·∫£o m√†u s·∫Øc an to√†n v√† r·ª±c r·ª°.'}
            ];

            // Populate Ingredient Accordion
            const accordion = document.getElementById('ingredient-accordion');
            ingredientsData.forEach((ing, index) => {
                const item = document.createElement('div');
                item.className = 'border border-gray-200 rounded-lg overflow-hidden';
                item.innerHTML = `
                    <button class="accordion-button w-full text-left p-4 bg-brand-superlight hover:bg-brand-light transition duration-300 flex justify-between items-center">
                        <span class="font-semibold text-brand">${ing.name}</span>
                        <span class="accordion-icon text-brand font-bold">+</span>
                    </button>
                    <div class="accordion-content hidden p-4 bg-white">
                        <p class="text-gray-600">${ing.description}</p>
                    </div>
                `;
                accordion.appendChild(item);
            });
            
            // Accordion Functionality
            accordion.addEventListener('click', function(e) {
                const button = e.target.closest('.accordion-button');
                if (button) {
                    const content = button.nextElementSibling;
                    const icon = button.querySelector('.accordion-icon');
                    const isHidden = content.classList.contains('hidden');
                    
                    // Optional: Close other accordions when one is opened
                    document.querySelectorAll('#ingredient-accordion .accordion-content').forEach(c => c.classList.add('hidden'));
                    document.querySelectorAll('#ingredient-accordion .accordion-icon').forEach(i => i.textContent = '+');
                    
                    if (isHidden) {
                        content.classList.remove('hidden');
                        icon.textContent = '-';
                    }
                    // If it was already open and clicked again, it will close due to the above lines.
                }
            });

            // Testimonials Data - Added more testimonials here
            const testimonials = [
                { text: "L·∫ßn ƒë·∫ßu ti√™n m√¨nh t√¨m ƒë∆∞·ª£c m·ªôt th·ªèi son v·ª´a ƒë·∫πp, v·ª´a l√¢u tr√¥i m√† l·∫°i an t√¢m v·ªÅ th√†nh ph·∫ßn. Y√™u S·∫Øc M·ªôc!", author: "An Nhi√™n, TP.HCM" },
                { text: "M√¨nh ƒëang mang thai n√™n r·∫•t k·ªπ t√≠nh. S·∫Øc M·ªôc l√† c·ª©u tinh, gi√∫p m√¨nh v·∫´n xinh ƒë·∫πp m√† kh√¥ng lo ·∫£nh h∆∞·ªüng ƒë·∫øn b√©.", author: "Minh Th∆∞, H√† N·ªôi" },
                { text: "Th√≠ch nh·∫•t l√† bao b√¨! V·ª´a ƒë·∫πp v·ª´a th√¢n thi·ªán m√¥i tr∆∞·ªùng. M·ªôt th∆∞∆°ng hi·ªáu Vi·ªát Nam qu√° t·ª± h√†o.", author: "Qu·ª≥nh Anh, ƒê√† N·∫µng" },
                { text: "M√†u son l√™n chu·∫©n, ch·∫•t son m·ªÅm m·ªãn kh√¥ng g√¢y kh√¥ m√¥i. S·∫Ω ·ªßng h·ªô S·∫Øc M·ªôc d√†i d√†i.", author: "Ng·ªçc H√†, H·∫£i Ph√≤ng" },
                { text: "T√¨m ki·∫øm m√£i m·ªõi ƒë∆∞·ª£c m·ªôt brand son 's·∫°ch' ƒë√∫ng nghƒ©a. R·∫•t h√†i l√≤ng v·ªõi ch·∫•t l∆∞·ª£ng s·∫£n ph·∫©m.", author: "Thu Trang, C·∫ßn Th∆°" },
                { text: "T·ª´ ng√†y d√πng S·∫Øc M·ªôc, m√¨nh kh√¥ng c√≤n lo l·∫Øng v·ªÅ ch√¨ hay h√≥a ch·∫•t ƒë·ªôc h·∫°i n·ªØa. C·∫£m ∆°n th∆∞∆°ng hi·ªáu!", author: "Ph∆∞∆°ng Vy, B√¨nh D∆∞∆°ng" },
                { text: "Son S·∫Øc M·ªôc m√†u l√™n chu·∫©n, m·ªÅm m√¥i, kh√¥ng h·ªÅ g√¢y b·∫øt d√≠nh. D√πng h√†ng ng√†y r·∫•t ti·ªán l·ª£i v√† an to√†n.", author: "Ho√†ng Y·∫øn, C·∫ßn Th∆°" },
                { text: "Tr∆∞·ªõc gi·ªù m√¨nh lu√¥n t√¨m ki·∫øm s·∫£n ph·∫©m thu·∫ßn chay, v√† S·∫Øc M·ªôc ƒë√£ v∆∞·ª£t xa mong ƒë·ª£i c·ªßa m√¨nh. Ch·∫•t l∆∞·ª£ng tuy·ªát v·ªùi!", author: "V√¢n Anh, Long An" },
                { text: "Th·ª±c s·ª± b·∫•t ng·ªù v·ªõi ƒë·ªô b·ªÅn m√†u v√† d∆∞·ª°ng ·∫©m c·ªßa son S·∫Øc M·ªôc. R·∫•t ƒë√°ng ƒë·ªÉ th·ª≠!", author: "Kim Chi, Kh√°nh H√≤a" },
                { text: "Bao b√¨ th√¢n thi·ªán m√¥i tr∆∞·ªùng l√† ƒëi·ªÉm c·ªông l·ªõn. M√¨nh r·∫•t vui khi ·ªßng h·ªô m·ªôt th∆∞∆°ng hi·ªáu c√≥ tr√°ch nhi·ªám.", author: "Thanh Mai, B√¨nh Thu·∫≠n" },
                { text: "Son l√™n m√†u t·ª± nhi√™n, ph√π h·ª£p ƒë·ªÉ ƒëi l√†m ho·∫∑c ƒëi ch∆°i. R·∫•t th√≠ch s·ª± nh·∫π nh√†ng v√† an to√†n c·ªßa s·∫£n ph·∫©m.", author: "H∆∞∆°ng Giang, ƒê·ªìng Nai" },
                { text: "Ch·∫•t son m·ªãn m√†ng nh∆∞ b∆°, kh√¥ng g√¢y kh√¥ m√¥i ch√∫t n√†o. S·∫Øc M·ªôc l√† l·ª±a ch·ªçn ho√†n h·∫£o cho nh·ªØng c√¥ n√†ng b·∫≠n r·ªôn.", author: "Th√πy Linh, V≈©ng T√†u" },
                { text: "R·∫•t ·∫•n t∆∞·ª£ng v·ªõi cam k·∫øt minh b·∫°ch th√†nh ph·∫ßn c·ªßa S·∫Øc M·ªôc. Gi·ªù ƒë√¢y m√¨nh c√≥ th·ªÉ y√™n t√¢m s·ª≠ d·ª•ng m·ªói ng√†y.", author: "Di·ªáu Hoa, Ngh·ªá An" },
                { text: "M√†u s·∫Øc r·∫•t trendy v√† ƒëa d·∫°ng, m√¨nh c√≥ th·ªÉ t√¨m th·∫•y m·ªçi t√¥ng m√†u y√™u th√≠ch t·∫°i S·∫Øc M·ªôc.", author: "Mai Ph∆∞∆°ng, Hu·∫ø" },
                { text: "M√¨nh ƒë√£ gi·ªõi thi·ªáu S·∫Øc M·ªôc cho t·∫•t c·∫£ b·∫°n b√® v√† m·ªçi ng∆∞·ªùi ƒë·ªÅu r·∫•t h√†i l√≤ng. S·∫£n ph·∫©m ch·∫•t l∆∞·ª£ng cao v√† an to√†n.", author: "Kh√°nh Ly, Th√°i B√¨nh" },
                { text: "Y√™u th√≠ch s·ª± t·ª± nhi√™n v√† d·ªãu nh·∫π c·ªßa S·∫Øc M·ªôc. Kh√¥ng h·ªÅ g√¢y k√≠ch ·ª©ng hay n·∫∑ng m√¥i nh∆∞ c√°c lo·∫°i son kh√°c.", author: "Trang Anh, Ph√∫ Th·ªç" }
            ];

            // Populate Testimonial Slider
            const testimonialSlider = document.getElementById('testimonial-slider');
            testimonials.forEach(t => {
                const card = document.createElement('div');
                card.className = 'testimonial-card p-4 md:p-6'; // Added padding for spacing
                card.innerHTML = `
                    <div class="bg-white p-6 rounded-xl shadow-sm text-center h-full flex flex-col justify-center card-hover">
                        <p class="text-gray-600 italic text-lg">"${t.text}"</p>
                        <h4 class="mt-4 font-bold text-brand">- ${t.author}</h4>
                    </div>
                `;
                testimonialSlider.appendChild(card);
            });

            // Testimonial Slider Functionality
            const prevTestimonialBtn = document.getElementById('prev-testimonial');
            const nextTestimonialBtn = document.getElementById('next-testimonial');
            let currentTestimonialIndex = 0;

            function getVisibleCardsCount() {
                if (window.innerWidth >= 1024) return 3; // lg
                if (window.innerWidth >= 768) return 2; // md
                return 1; // sm and smaller
            }

            function showTestimonials() {
                const cardWidth = testimonialSlider.querySelector('.testimonial-card').offsetWidth;
                testimonialSlider.style.transform = `translateX(-${currentTestimonialIndex * cardWidth}px)`;
                prevTestimonialBtn.disabled = currentTestimonialIndex === 0;
                nextTestimonialBtn.disabled = currentTestimonialIndex >= testimonials.length - getVisibleCardsCount();
            }

            nextTestimonialBtn.addEventListener('click', () => {
                if (currentTestimonialIndex < testimonials.length - getVisibleCardsCount()) {
                    currentTestimonialIndex++;
                    showTestimonials();
                }
            });
            prevTestimonialBtn.addEventListener('click', () => {
                if (currentTestimonialIndex > 0) {
                    currentTestimonialIndex--;
                    showTestimonials();
                }
            });
            window.addEventListener('resize', () => {
                currentTestimonialIndex = 0; // Reset on resize for simplicity or recalculate
                showTestimonials();
            });
            showTestimonials(); // Initial call


            // VTO (Virtual Try-On) Modal Logic
            const vtoModal = document.getElementById('vto-modal');
            const openVtoModalLink = document.querySelector('a[href="thu_son_ao.html"]'); 
            const closeVtoModalBtn = document.getElementById('close-vto-modal');
            const vtoVideo = document.getElementById('vto-video');
            const vtoCanvas = document.getElementById('vto-canvas');
            const vtoCtx = vtoCanvas.getContext('2d');
            const vtoColorOptions = document.getElementById('vto-color-options');
            const vtoStatus = document.getElementById('vto-status');

            let faceLandmarksModel;
            let currentLipColor = 'rgba(185, 92, 80, 0.7)'; // Default: ƒê·ªè ƒê·∫•t with opacity
            let videoStream;
            let animationFrameId;

            // Precise lip landmark indices for TensorFlow.js Face Landmarks Detection model
            const LIP_LANDMARKS = {
                // Outer contour of the lips
                upperLipOuter: [61, 185, 40, 39, 37, 0, 267, 269, 270, 409, 291],
                lowerLipOuter: [291, 375, 321, 405, 314, 17, 84, 181, 91, 146, 61],
                // Inner contour of the lips (can be used for more detailed rendering)
                upperLipInner: [78, 191, 80, 81, 82, 13, 312, 311, 310, 415, 308],
                lowerLipInner: [308, 324, 318, 402, 317, 14, 87, 178, 88, 95, 78]
            };


            async function setupWebcam() {
                try {
                    videoStream = await navigator.mediaDevices.getUserMedia({ video: { facingMode: 'user' }, audio: false });
                    vtoVideo.srcObject = videoStream;
                    return new Promise((resolve) => {
                        vtoVideo.onloadedmetadata = () => resolve(true);
                    });
                } catch (err) {
                    console.error("Error accessing webcam:", err);
                    vtoStatus.textContent = "Kh√¥ng th·ªÉ truy c·∫≠p webcam. Vui l√≤ng c·∫•p quy·ªÅn.";
                    return false;
                }
            }

            async function loadFaceLandmarksModel() {
                vtoStatus.textContent = "ƒêang t·∫£i model AI...";
                try {
                    await tf.setBackend('webgl'); // Ensure WebGL backend is used for performance
                    faceLandmarksModel = await faceLandmarksDetection.load(
                        faceLandmarksDetection.SupportedPackages.mediapipeFacemesh,
                        { maxFaces: 1, shouldLoadIrisModel: false } // Iris model not needed for lips
                    );
                    vtoStatus.textContent = "Model ƒë√£ s·∫µn s√†ng. ƒêang ch·ªù webcam...";
                } catch (error) {
                     console.error("Error loading model:", error);
                     vtoStatus.textContent = "L·ªói t·∫£i model AI.";
                }
            }
            
            function hexToRgbaWithOpacity(hexWithOpacity) {
                // Assuming hexWithOpacity is like 'B95C50B3' (RRGGBBAA)
                const r = parseInt(hexWithOpacity.slice(0, 2), 16);
                const g = parseInt(hexWithOpacity.slice(2, 4), 16);
                const b = parseInt(hexWithOpacity.slice(4, 6), 16);
                const a = parseInt(hexWithOpacity.slice(6, 8), 16) / 255; // Convert AA to 0-1 alpha
                return `rgba(${r}, ${g}, ${b}, ${a})`;
            }

            function drawLipstick(predictions) {
                vtoCtx.clearRect(0, 0, vtoCanvas.width, vtoCanvas.height); // Clear previous frame
                if (predictions && predictions.length > 0) {
                    const keypoints = predictions[0].scaledMesh; // Use scaledMesh for coordinates relative to video size
                    
                    vtoCtx.fillStyle = currentLipColor;
                    
                    // Combine upper and lower lip outer contours for a single filled path
                    const lipPath = new Path2D();
                    
                    // Upper lip outer
                    const upperOuterPoints = LIP_LANDMARKS.upperLipOuter.map(idx => ({x: keypoints[idx][0], y: keypoints[idx][1]}));
                    lipPath.moveTo(upperOuterPoints[0].x, upperOuterPoints[0].y);
                    for (let i = 1; i < upperOuterPoints.length; i++) {
                        lipPath.lineTo(upperOuterPoints[i].x, upperOuterPoints[i].y);
                    }

                    // Lower lip outer (connects from the end of upperLipOuter)
                    // Ensure smooth connection. The last point of upperLipOuter (291) is the first of lowerLipOuter.
                    const lowerOuterPoints = LIP_LANDMARKS.lowerLipOuter.slice(1).map(idx => ({x: keypoints[idx][0], y: keypoints[idx][1]})); // slice(1) to avoid repeating point 291
                    for (let i = 0; i < lowerOuterPoints.length; i++) {
                        lipPath.lineTo(lowerOuterPoints[i].x, lowerOuterPoints[i].y);
                    }
                    lipPath.closePath(); // Close the path to form a complete shape
                    vtoCtx.fill(lipPath);

                    vtoStatus.style.display = 'none'; // Hide status if drawing is successful
                } else {
                    // No face detected
                    vtoStatus.textContent = "Kh√¥ng t√¨m th·∫•y khu√¥n m·∫∑t.";
                    vtoStatus.style.display = 'block';
                }
            }

            async function detectionLoop() {
                if (faceLandmarksModel && vtoVideo.readyState >= HTMLMediaElement.HAVE_ENOUGH_DATA) {
                    const predictions = await faceLandmarksModel.estimateFaces({ input: vtoVideo });
                    drawLipstick(predictions);
                }
                animationFrameId = requestAnimationFrame(detectionLoop);
            }

            async function startVTO() {
                // This function is called when the modal opens
                if (!faceLandmarksModel) { // Load model only if not already loaded
                    await loadFaceLandmarksModel();
                    if (!faceLandmarksModel) return; // Exit if model loading failed
                }
                
                const webcamReady = await setupWebcam();
                if (!webcamReady) return;

                vtoVideo.play();
                // Ensure canvas dimensions are set once video metadata is loaded
                vtoVideo.onloadedmetadata = () => {
                    vtoCanvas.width = vtoVideo.videoWidth;
                    vtoCanvas.height = vtoVideo.videoHeight;
                    vtoStatus.textContent = "ƒêang nh·∫≠n di·ªán...";
                    if (animationFrameId) cancelAnimationFrame(animationFrameId); // Cancel any existing loop
                    detectionLoop(); // Start the detection loop
                };
                // If metadata is already loaded (e.g., webcam was previously used)
                if (vtoVideo.readyState >= HTMLMediaElement.HAVE_METADATA) {
                   if(vtoVideo.onloadedmetadata && typeof vtoVideo.onloadedmetadata === 'function') vtoVideo.onloadedmetadata();
                }
            }

            function stopVTO() {
                // This function is called when the modal closes
                if (animationFrameId) {
                    cancelAnimationFrame(animationFrameId);
                    animationFrameId = null;
                }
                if (videoStream) {
                    videoStream.getTracks().forEach(track => track.stop()); // Stop webcam tracks
                    videoStream = null;
                }
                vtoVideo.srcObject = null; // Release video object
                if (vtoCtx) { 
                    vtoCtx.clearRect(0, 0, vtoCanvas.width, vtoCanvas.height); // Clear canvas
                }
                vtoStatus.textContent = "ƒêang t·∫£i model v√† kh·ªüi ƒë·ªông webcam..."; // Reset status
                vtoStatus.style.display = 'block';
            }

            // Event listener for the "Tr·∫£i Nghi·ªám Th·ª≠ Son ·∫¢o (Live)" link
            // This link will NOT open the modal, it will navigate to thu_son_ao.html
            // The VTO modal functionality is self-contained and was intended for a modal on *this* page.
            // Since the user's request is to navigate to thu_son_ao.html, the modal logic here
            // might be redundant if the primary VTO experience is on the separate page.
            // For now, I will leave the modal logic as it was, assuming it might be used
            // for a quick preview on this page if a button *was* to open it.
            // The actual link `a[href="thu_son_ao.html"]` will perform its default navigation.

            // If there was a button to open THIS modal (e.g., <button id="open-vto-modal-on-index">...):
            // const openThisModalButton = document.getElementById('open-vto-modal-on-index');
            // if (openThisModalButton) {
            //     openThisModalButton.addEventListener('click', (e) => {
            //         e.preventDefault(); // Prevent default if it's a link/button that might navigate
            //         vtoModal.classList.remove('hidden');
            //         vtoModal.querySelector('div').classList.remove('scale-95'); // Animate in
            //         startVTO();
            //     });
            // }
            
            // Close modal button
            if (closeVtoModalBtn) { 
                closeVtoModalBtn.addEventListener('click', () => {
                    if (vtoModal.querySelector('div')) { 
                        vtoModal.querySelector('div').classList.add('scale-95'); // Animate out
                    }
                    setTimeout(() => vtoModal.classList.add('hidden'), 300);
                    stopVTO();
                });
            }
            
            // Close modal if clicking outside content
            if (vtoModal) { 
                vtoModal.addEventListener('click', function(e) { 
                    if(e.target === vtoModal){ // Check if the click is on the backdrop
                        if (closeVtoModalBtn) closeVtoModalBtn.click(); 
                    }
                });
            }

            // Populate VTO color options (for the modal on this page)
            products.forEach(p => {
                const colorBtn = document.createElement('button');
                colorBtn.className = 'vto-color-btn w-full h-12 sm:h-16 rounded-lg border-2 border-transparent hover:border-brand focus:border-brand focus:ring-2 focus:ring-brand-light outline-none';
                colorBtn.style.backgroundColor = p.color; // Use the solid color for the button itself
                colorBtn.dataset.colorHexOpacity = p.hexOpacity; // Store the color with opacity for drawing
                colorBtn.setAttribute('aria-label', `Th·ª≠ m√†u ${p.name}`);
                colorBtn.addEventListener('click', () => {
                    currentLipColor = hexToRgbaWithOpacity(p.hexOpacity); // Update the drawing color
                     document.querySelectorAll('#vto-color-options .vto-color-btn').forEach(btn => btn.classList.remove('ring-2', 'ring-brand'));
                     colorBtn.classList.add('ring-2', 'ring-brand'); // Highlight selected button
                });
                if (vtoColorOptions) { 
                    vtoColorOptions.appendChild(colorBtn);
                }
            });
            
            // Select the first color by default for the modal
            if (vtoColorOptions) { 
                const firstColorButton = vtoColorOptions.firstElementChild;
                if (firstColorButton && typeof firstColorButton.click === 'function') {  
                    firstColorButton.click();
                }
            }
        });
    </script>
</body>
</html>
