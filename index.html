<!DOCTYPE html>
<html lang="vi" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>S·∫Øc M·ªôc - V·∫ª ƒê·∫πp C√≥ Tr√°ch Nhi·ªám</title>

    <!-- SEO Meta Tags -->
    <meta name="description" content="S·∫Øc M·ªôc - Th∆∞∆°ng hi·ªáu m·ªπ ph·∫©m Vi·ªát cam k·∫øt v·ªÅ v·∫ª ƒë·∫πp an to√†n, tinh khi·∫øt v√† b·ªÅn v·ªØng. Kh√°m ph√° son m√¥i t·ª± nhi√™n kh√¥ng h√≥a ch·∫•t ƒë·ªôc h·∫°i.">
    <meta property="og:title" content="S·∫Øc M·ªôc - V·∫ª ƒê·∫πp C√≥ Tr√°ch Nhi·ªám">
    <meta property="og:description" content="S·∫Øc M·ªôc - Th∆∞∆°ng hi·ªáu m·ªπ ph·∫©m Vi·ªát cam k·∫øt v·ªÅ v·∫ª ƒë·∫πp an to√†n, tinh khi·∫øt v√† b·ªÅn v·ªØng. Kh√°m kh√°m son m√¥i t·ª± nhi√™n kh√¥ng h√≥a ch·∫•t ƒë·ªôc h·∫°i.">
    <meta property="og:image" content="https://placehold.co/1200x630/5D7A4D/FFFFFF?text=Sac+Moc+Beauty"> <!-- Placeholder, replace with actual image URL -->
    <meta property="og:url" content="https://www.sacmoc.vn"> <!-- Replace with actual website URL -->
    <meta name="twitter:card" content="summary_large_image">

    <!-- Preload fonts for faster loading -->
    <link rel="preload" href="https://fonts.googleapis.com/css2?family=Merriweather+Sans:wght@700&display=swap" as="style" onload="this.onload=null;this.rel='stylesheet'\">
    <link rel="preload" href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600&display=swap" as="style" onload="this.onload=null;this.rel='stylesheet'\">
    <noscript>
        <link href="https://fonts.googleapis.com/css2?family=Merriweather+Sans:wght@700&family=Open+Sans:wght@400;600&display=swap" rel="stylesheet">
    </noscript>

    <!-- Preload critical scripts -->
    <link rel="preload" href="https://cdn.tailwindcss.com" as="script">
    <link rel="preload" href="https://cdn.jsdelivr.net/npm/chart.js" as="script">
    <!-- Removed TensorFlow.js preload links -->

    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <!-- Removed TensorFlow.js script links -->

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <!-- Updated font to be more in harmony with the logo - 'Merriweather Sans' for headings and 'Open Sans' for body text -->
    <link href="https://fonts.googleapis.com/css2?family=Merriweather+Sans:wght@700&family=Open+Sans:wght@400;600&display=swap" rel="stylesheet">
    <style>
        body {
            /* Changed font-family to Open Sans for general text */
            font-family: 'Open Sans', sans-serif;
            /* Changed background-color to beige */
            background-color: #F5F5DC;
            color: #4A4A4A;
            /* Add padding-top to body to prevent content from hiding under fixed header */
            padding-top: 9rem; /* Equivalent to h-36 + some buffer, adjust if needed */
        }
        /* New custom class for headings to use Merriweather Sans */
        .font-heading {
            font-family: 'Merriweather Sans', sans-serif;
        }
        /* Updated brand colors to be closer to the logo's green/brown tones */
        .text-brand { color: #5D7A4D; } /* A darker, earthy green */
        .bg-brand { background-color: #5D7A4D; }
        .bg-brand-light { background-color: #A2B99C; } /* A lighter green */
        .bg-brand-superlight { background-color: #E6EDE4; } /* Very light green */
        .border-brand { border-color: #5D7A4D; }
        
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
            height: 400px;
            max-height: 50vh;
        }
        @media (max-width: 768px) {
            .chart-container {
                height: 500px;
                max-height: 70vh;
            }
        }
        .nav-link {
            transition: color 0.3s ease;
        }
        .nav-link:hover {
            color: #5D7A4D; /* Updated hover color */
        }
        .card-hover {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .card-hover:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.05), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
        
        /* New CSS for testimonial carousel structure */
        .testimonial-viewport {
            overflow: hidden; /* This creates the visible window for testimonials */
            position: relative;
            width: 100%;
            /* Removed scroll-snap-type as it conflicts with JS controlled sliding */
        }

        #testimonial-slider { 
            display: flex;
            transition: transform 0.5s ease-in-out; /* Apply transition to the element being transformed */
            flex-wrap: nowrap; /* Ensure items don't wrap to the next line */
            -webkit-overflow-scrolling: touch; /* For smooth scrolling on iOS */
            /* Width will be set dynamically by JS */
        }
        
        .testimonial-card {
            /* flex-shrink and flex-grow will be set by JS */
            /* width will be set dynamically by JS to ensure proper sizing */
            /* Removed flex-basis and media queries as JS will handle sizing */
        }
         /* PADDING is still relevant for inside the cards */
         .testimonial-card .bg-white {
            padding: 1.5rem; /* Equivalent to p-6 Tailwind class */
         }

        /* Removed VTO modal specific styles */

        /* Hero section background image blur and fade-in effect */
        .hero-background-image {
            filter: blur(8px); /* Initial blur */
            transition: filter 1s ease-out, transform 1s ease-out; /* Smooth transition for blur and zoom */
            transform: scale(1.05); /* Slightly zoomed in */
        }
        .hero-background-image.loaded {
            filter: blur(0); /* No blur after loading */
            transform: scale(1); /* Original scale */
        }

        /* Animation classes for scroll effects */
        .animate-on-scroll {
            opacity: 0;
            /* Default transform for slide-up and zoom-in */
            transform: translateY(20px);
            transition: opacity 0.8s ease-out, transform 0.8s ease-out;
        }

        /* Specific initial states if they differ from the default transform */
        .animate-on-scroll.zoom-in {
            transform: scale(0.95);
        }
        /* No specific transform for fade-in, it just uses opacity */

        /* The class that makes elements visible and resets transform */
        .animate-on-scroll.visible {
            opacity: 1;
            transform: translateY(0); /* Reset for slide-up and default */
        }
        .animate-on-scroll.zoom-in.visible {
            transform: scale(1); /* Reset for zoom-in */
        }
        /* No explicit fade-in.visible needed if it's just opacity */

        /* Styles for the video background */
        .video-background {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover; /* Ensures the video covers the entire area */
            z-index: -1; /* Puts the video behind other content */
        }

        /* Shopping Cart Styles */
        .cart-sidebar {
            position: fixed;
            top: 0;
            right: -100%; /* Initially hidden off-screen */
            width: 100%;
            max-width: 400px; /* Max width for desktop */
            height: 100%;
            background-color: #F5F5DC; /* Beige background */
            box-shadow: -2px 0 10px rgba(0, 0, 0, 0.1);
            transition: right 0.3s ease-in-out;
            z-index: 1000; /* High z-index to be on top */
            display: flex;
            flex-direction: column;
        }

        .cart-sidebar.open {
            right: 0; /* Slide in */
        }

        .cart-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 999;
            display: none; /* Hidden by default */
        }

        .cart-overlay.open {
            display: block; /* Show when cart is open */
        }

        /* For the cart badge */
        .cart-badge {
            position: absolute;
            top: -8px;
            right: -8px;
            background-color: #EF4444; /* Red color */
            color: white;
            border-radius: 9999px; /* Fully rounded */
            padding: 2px 6px; /* Adjust padding for size */
            font-size: 0.75rem; /* Text size */
            font-weight: bold;
            min-width: 20px; /* Ensure it's a circle even with single digit */
            text-align: center;
        }

        /* Animation for product flying to cart */
        .fly-to-cart-animation {
            position: fixed;
            top: var(--start-y);
            left: var(--start-x);
            width: var(--size);
            height: var(--size);
            background-color: var(--color);
            border-radius: 50%; /* Make it round */
            opacity: 1;
            z-index: 1001; /* Above cart sidebar */
            transition: all 0.6s ease-in-out; /* Smooth transition for position and size */
            transform: scale(1);
        }

        .fly-to-cart-animation.animate {
            top: var(--end-y);
            left: var(--end-x);
            width: 20px; /* Smaller when flying to cart */
            height: 20px;
            opacity: 0.5;
            transform: scale(0.5);
        }

        /* CSS for the subtle pulse animation */
        @keyframes subtlePulse {
          0% { transform: scale(1); box-shadow: 0 0 0 rgba(93,122,77,0.2); }
          50% { transform: scale(1.02); box-shadow: 0 0 12px rgba(93,122,77,0.35); }
          100% { transform: scale(1); box-shadow: 0 0 0 rgba(93,122,77,0.2); }
        }
        .btn-pulse {
          animation: subtlePulse 2.8s ease-in-out infinite;
        }
    </style>
</head>
<body class="antialiased">

    <!-- Header section - Changed to 'fixed' -->
    <header id="header" class="bg-white/80 backdrop-blur-md fixed top-0 left-0 right-0 w-full z-50 shadow-sm" role="banner">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-36"> 
                <div class="flex-shrink-0 flex items-center">
                    <a href="#hero" class="flex items-center" aria-label="Trang ch·ªß S·∫Øc M·ªôc">
                        <img src="Logo.png" alt="S·∫Øc M·ªôc Logo" class="h-32 w-auto"> 
                    </a>
                </div>
                <!-- Desktop Navigation and Cart Icon -->
                <div class="hidden md:flex items-center"> <!-- This div will contain both nav and desktop cart -->
                    <nav class="flex items-center space-x-8" role="navigation" aria-label="ƒêi·ªÅu h∆∞·ªõng ch√≠nh">
                        <a href="#philosophy" class="text-gray-600 nav-link font-medium" aria-label="ƒêi ƒë·∫øn ph·∫ßn Tri·∫øt L√Ω">Tri·∫øt L√Ω</a>
                        <a href="#products" class="text-gray-600 nav-link font-medium" aria-label="ƒêi ƒë·∫øn ph·∫ßn S·∫£n Ph·∫©m">S·∫£n Ph·∫©m</a>
                        <a href="#transparency" class="text-gray-600 nav-link font-medium" aria-label="ƒêi ƒë·∫øn ph·∫ßn Minh B·∫°ch">Minh B·∫°ch</a>
                        <a href="#community" class="text-gray-600 nav-link font-medium" aria-label="ƒêi ƒë·∫øn ph·∫ßn C·ªông ƒê·ªìng">C·ªông ƒê·ªìng</a>
                    </nav>
                    <div class="relative ml-8"> <!-- Added ml-8 for spacing between nav and cart -->
                        <button id="cart-icon-desktop" class="relative text-gray-600 hover:text-brand focus:outline-none p-2 rounded-full hover:bg-gray-100 transition-colors" aria-label="M·ªü gi·ªè h√†ng">
                            <!-- Updated Shopping Cart SVG icon -->
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-8 h-8 text-brand">
                                <path d="M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z"/>
                                <path d="M3 6h18"/>
                                <path d="M16 10a4 4 0 0 1-8 0"/>
                            </svg>
                            <span id="cart-badge-desktop" class="cart-badge hidden">0</span>
                        </button>
                    </div>
                </div>
                <!-- Mobile Menu & Cart Icon -->
                <div class="md:hidden flex items-center space-x-4">
                    <button id="cart-icon-mobile" class="relative text-gray-600 hover:text-brand focus:outline-none p-2 rounded-full hover:bg-gray-100 transition-colors" aria-label="M·ªü gi·ªè h√†ng">
                        <!-- Updated Shopping Cart SVG icon -->
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-8 h-8 text-brand">
                            <path d="M6 2L3 6v14a2 2 0 0 0 2 2h14a2 0 0 0 2-2V6l-3-4Z"/>
                            <path d="M3 6h18"/>
                            <path d="M16 10a4 0 0 1-8 0"/>
                        </svg>
                        <span id="cart-badge-mobile" class="cart-badge hidden">0</span>
                    </button>
                    <button id="mobile-menu-button" class="text-gray-600 hover:text-brand focus:outline-none" aria-label="M·ªü menu di ƒë·ªông">
                        <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M4 6h16M4 12h16m-7 6h7" />
                        </svg>
                    </button>
                </div>
            </div>
        </div>
        <div id="mobile-menu" class="md:hidden hidden" role="navigation" aria-label="Menu di ƒë·ªông">
            <nav class="px-2 pt-2 pb-3 space-y-1 sm:px-3">
                <a href="#philosophy" class="block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-brand hover:bg-gray-50" aria-label="ƒêi ƒë·∫øn ph·∫ßn Tri·∫øt L√Ω">Tri·∫øt L√Ω</a>
                <a href="#products" class="block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-brand hover:bg-gray-50" aria-label="ƒêi ƒë·∫øn ph·∫ßn S·∫£n Ph·∫©m">S·∫£n Ph·∫©m</a>
                <a href="#transparency" class="block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-brand hover:bg-gray-50" aria-label="ƒêi ƒë·∫øn ph·∫ßn Minh B·∫°ch">Minh B·∫°ch</a>
                <a href="#community" class="block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-brand hover:bg-gray-50" aria-label="ƒêi ƒë·∫øn ph·∫ßn C·ªông ƒê·ªìng">C·ªông ƒê·ªìng</a>
            </nav>
        </div>
    </header>

    <main>
        <!-- Hero section - Dynamic background image with blur/fade -->
        <section id="hero" class="pt-16 h-screen flex items-center bg-cover bg-center relative overflow-hidden" role="region" aria-label="Gi·ªõi thi·ªáu S·∫Øc M·ªôc">
            <!-- Video background -->
            <video autoplay loop muted playsinline class="video-background">
                <source src="Video.mp4" type="video/mp4">
                <!-- Add more source types if needed for broader browser support (e.g., .webm, .ogg) -->
                Your browser does not support the video tag.
            </video>
            <!-- Removed the transparent overlay div as per user request -->
            <div class="relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center animate-on-scroll visible"> <!-- Hero section is visible by default -->
                <!-- Increased font size for the main heading on the banner -->
                <!-- Added gradient text effect for the slogan -->
                <!-- Adjusted line-height to ensure diacritics are not cut off -->
                <h1 class="text-5xl md:text-7xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-[#5D7A4D] to-[#8CA786] tracking-tight font-heading leading-normal py-4">
                    T·ª± nhi√™n t·ª´ S·∫Øc,<br>M·ªôc t·ª´ t√¢m
                </h1> <!-- Applied font-heading here -->
                <p class="mt-4 max-w-2xl mx-auto text-lg md:text-xl text-white" style="text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);">S·∫Øc M·ªôc kh√¥ng ch·ªâ l√† son m√¥i. ƒê√≥ l√† m·ªôt l·ª±a ch·ªçn an to√†n cho b·∫°n, t·ª≠ t·∫ø v·ªõi h√†nh tinh v√† cam k·∫øt cho m·ªôt v·∫ª ƒë·∫πp minh b·∫°ch.</p>
                <div class="mt-8">
                    <a href="#philosophy" class="inline-block bg-brand text-white font-bold py-3 px-8 rounded-full shadow-lg hover:bg-opacity-90 transition-transform transform hover:scale-105" aria-label="Kh√°m ph√° c√¢u chuy·ªán c·ªßa S·∫Øc M·ªôc">Kh√°m Ph√°m C√¢u Chuy·ªán</a>
                </div>
            </div>
        </section>

        <section id="philosophy" class="py-20 bg-white" role="region" aria-label="Tri·∫øt l√Ω S·∫Øc M·ªôc">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="text-center animate-on-scroll slide-up">
                    <h2 class="text-3xl font-bold text-brand font-heading">Tri·∫øt L√Ω S·∫Øc M·ªôc</h2> <!-- Applied font-heading here -->
                    <p class="mt-4 max-w-3xl mx-auto text-lg text-gray-600">Ch√∫ng t√¥i ra ƒë·ªùi ƒë·ªÉ gi·∫£i quy·∫øt nh·ªØng lo ng·∫°i v·ªÅ s·ª©c kh·ªèe v√† m√¥i tr∆∞·ªùng trong ng√†nh m·ªπ ph·∫©m. S·∫Øc M·ªôc l√† c√¢u tr·∫£ l·ªùi cho nhu c·∫ßu v·ªÅ m·ªôt v·∫ª ƒë·∫πp kh√¥ng ch·ªâ r·∫°ng r·ª° b√™n ngo√†i m√† c√≤n an t√¢m t·ª´ b√™n trong.</p>
                </div>
                <div class="mt-16 grid gap-10 md:grid-cols-2 lg:grid-cols-4">
                    <div class="text-center p-6 bg-brand-superlight rounded-xl card-hover animate-on-scroll slide-up" style="transition-delay: 0.1s;">
                        <div class="flex items-center justify-center h-16 w-16 rounded-full bg-brand-light mx-auto text-3xl">
                            <!-- SVG Icon for An To√†n & Tinh Khi·∫øt (Safe & Pure) - Leaf -->
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-white" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M17.32 5.09a.75.75 0 011.06 0L20 6.71l-1.68 1.68a.75.75 0 01-1.06 0L17.32 5.09zM12 21.35c-3.78-3.4-7.18-6.8-7.18-11.54 0-3.08 2.42-5.5 5.5-5.5 1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3c3.08 0 5.5 2.42 5.5 5.5 0 3.78-3.4 6.86-8.55 11.54L12 21.35zM9.5 7C7.57 7 6 8.57 6 10.5S7.57 14 9.5 14 13 12.43 13 10.5 11.43 7 9.5 7z"/>
                            </svg>
                        </div>
                        <h3 class="mt-5 text-xl font-semibold text-brand font-heading">An To√†n & Tinh Khi·∫øt</h3> <!-- Applied font-heading here -->
                        <p class="mt-2 text-gray-600">C√¥ng th·ª©c v·ªõi h∆°n 95% th√†nh ph·∫ßn t·ª± nhi√™n, kh√¥ng ch·ª©a kim lo·∫°i n·∫∑ng, parabens hay h√≥a ch·∫•t ƒë·ªôc h·∫°i.</p>
                    </div>
                    <div class="text-center p-6 bg-brand-superlight rounded-xl card-hover animate-on-scroll slide-up" style="transition-delay: 0.2s;">
                        <div class="flex items-center justify-center h-16 w-16 rounded-full bg-brand-light mx-auto text-3xl">
                            <!-- SVG Icon for B·ªÅn V·ªØng & √ù Th·ª©c (Sustainable & Conscious) - Globe -->
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-white" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.95-.71-7-4.22-7-8.93 0-.31.02-.61.04-.92L11 4.07v15.86z"/>
                            </svg>
                        </div>
                        <h3 class="mt-5 text-xl font-semibold text-brand font-heading">B·ªÅn V·ªØng & √ù Th·ª©c</h3> <!-- Applied font-heading here -->
                        <p class="mt-2 text-gray-600">Bao b√¨ th√¢n thi·ªán m√¥i tr∆∞·ªùng, t√°i ch·∫ø ƒë∆∞·ª£c v√† ngu·ªìn nguy√™n li·ªáu khai th√°c c√≥ ƒë·∫°o ƒë·ª©c.</p>
                    </div>
                    <div class="text-center p-6 bg-brand-superlight rounded-xl card-hover animate-on-scroll slide-up" style="transition-delay: 0.3s;">
                         <div class="flex items-center justify-center h-16 w-16 rounded-full bg-brand-light mx-auto text-3xl">
                            <!-- SVG Icon for Minh B·∫°ch & ƒê·∫°o ƒê·ª©c (Transparent & Ethical) - Heart -->
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-white" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/>
                            </svg>
                        </div>
                        <h3 class="mt-5 text-xl font-semibold text-brand font-heading">Minh B·∫°ch & ƒê·∫°o ƒê·ª©c</h3> <!-- Applied font-heading here -->
                        <p class="mt-2 text-gray-600">Cam k·∫øt 100% kh√¥ng th·ª≠ nghi·ªám tr√™n ƒë·ªông v·∫≠t v√† c√¥ng khai to√†n b·ªô th√†nh ph·∫ßn s·∫£n ph·∫©m.</p>
                    </div>
                     <div class="text-center p-6 bg-brand-superlight rounded-xl card-hover animate-on-scroll slide-up" style="transition-delay: 0.4s;">
                        <div class="flex items-center justify-center h-16 w-16 rounded-full bg-brand-light mx-auto text-3xl">
                            <!-- SVG Icon for Hi·ªáu Su·∫•t V∆∞·ª£t Tr·ªôi (Superior Performance) - Star -->
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-white" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"/>
                            </svg>
                        </div>
                        <h3 class="mt-5 text-xl font-semibold text-brand font-heading">Hi·ªáu Su·∫•t V∆∞·ª£t Tr·ªôi</h3> <!-- Applied font-heading here -->
                        <p class="mt-2 text-gray-600">M√†u s·∫Øc r·ª±c r·ª°, l√¢u tr√¥i v√† ch·∫•t son m·ªÅm m·ªãn. V·∫ª ƒë·∫πp "s·∫°ch" kh√¥ng c√≥ nghƒ©a l√† ph·∫£i th·ªèa hi·ªáp.</p>
                    </div>
                </div>

                <div class="mt-20 animate-on-scroll slide-up">
                    <div class="text-center">
                        <h3 class="text-2xl font-bold text-brand font-heading">So S√°nh Tr·ª±c Quan</h3> <!-- Applied font-heading here -->
                        <p class="mt-2 max-w-2xl mx-auto text-md text-gray-600">M·ªôt c√°i nh√¨n nhanh ƒë·ªÉ th·∫•y s·ª± kh√°c bi·ªát m√† S·∫Øc M·ªôc mang l·∫°i cho b·∫°n v√† cho h√†nh tinh.</p>
                    </div>
                    <div class="mt-8 chart-container">
                        <canvas id="comparisonChart" role="img" aria-label="Bi·ªÉu ƒë·ªì so s√°nh s·∫£n ph·∫©m S·∫Øc M·ªôc v·ªõi son truy·ªÅn th·ªëng v·ªÅ th√†nh ph·∫ßn, bao b√¨, th·ª≠ nghi·ªám ƒë·ªông v·∫≠t, minh b·∫°ch ngu·ªìn g·ªëc v√† hi·ªáu su·∫•t."></canvas>
                    </div>
                </div>
            </div>
        </section>

        <section id="products" class="py-20 bg-brand-superlight" role="region" aria-label="S·∫£n ph·∫©m son m√¥i S·∫Øc M·ªôc">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="text-center animate-on-scroll slide-up">
                    <h2 class="text-3xl font-bold text-brand font-heading">Kh√°m Ph√°m M√†u Son C·ªßa B·∫°n</h2> <!-- Applied font-heading here -->
                    <p class="mt-4 max-w-3xl mx-auto text-lg text-gray-600">T√¨m ki·∫øm s·∫Øc m√†u ho√†n h·∫£o ch∆∞a bao gi·ªù d·ªÖ d√†ng h∆°n. H√£y th·ª≠ ngay nh·ªØng gam m√†u l·∫•y c·∫£m h·ª©ng t·ª´ thi√™n nhi√™n c·ªßa ch√∫ng t√¥i.</p>
                </div>

                <!-- Product list layout adjusted for larger squares -->
                <!-- Changed to 6 columns for large screens to make squares smaller and match thu_son_ao.html -->
                <div class="mt-16 grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-6 lg:gap-8" id="product-list" role="list">
                    <!-- Product items will be dynamically inserted here by JavaScript -->
                </div>

                <div class="mt-12 text-center animate-on-scroll zoom-in">
                     <a href="thu_son_ao.html"
                        class="inline-block bg-brand text-white font-bold py-3 px-8 rounded-full shadow-lg transition-all transform hover:scale-105 hover:shadow-2xl btn-pulse"
                        aria-label="Tr·∫£i Nghi·ªám Th·ª≠ Son ·∫¢o (Live)">
                        üé• Tr·∫£i Nghi·ªám Th·ª≠ Son ·∫¢o (Live)
                    </a>
                </div>
            </div>
        </section>

        <section id="transparency" class="py-20 bg-[#F5F5DC]" role="region" aria-label="Trung t√¢m minh b·∫°ch v·ªÅ th√†nh ph·∫ßn s·∫£n ph·∫©m">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="text-center animate-on-scroll slide-up">
                    <h2 class="text-3xl font-bold text-brand font-heading">Trung T√¢m Minh B·∫°ch</h2> <!-- Applied font-heading here -->
                    <p class="mt-4 max-w-3xl mx-auto text-lg text-gray-600">Ch√∫ng t√¥i tin v√†o v·∫ª ƒë·∫πp kh√¥ng che gi·∫•u. Kh√°m ph√° c√¢u chuy·ªán ƒë·∫±ng sau m·ªói th√†nh ph·∫ßn l√†m n√™n th·ªèi son c·ªßa b·∫°n.</p>
                </div>
                <div id="ingredient-accordion" class="mt-12 max-w-3xl mx-auto space-y-4" role="tablist" aria-orientation="vertical">
                    <!-- Ingredient accordion items will be dynamically inserted here by JavaScript -->
                </div>
            </div>
        </section>

        <section id="community" class="py-20 bg-brand-superlight" role="region" aria-label="C·ªông ƒë·ªìng S·∫Øc M·ªôc">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="text-center animate-on-scroll slide-up">
                    <h2 class="text-3xl font-bold text-brand font-heading">C·ªông ƒê·ªìng S·∫Øc M·ªôc</h2> <!-- Applied font-heading here -->
                    <p class="mt-4 max-w-3xl mx-auto text-lg text-gray-600">Tham gia c√πng h√†ng ng√†n ph·ª• n·ªØ Vi·ªát ƒë√£ l·ª±a ch·ªçn v·∫ª ƒë·∫πp c√≥ √Ω th·ª©c. Chia s·∫ª kho·∫£nh kh·∫Øc c·ªßa b·∫°n v·ªõi #SacMocBeauty.</p>
                </div>
                <div class="mt-16 relative animate-on-scroll slide-up">
                    <div class="testimonial-viewport" role="group" aria-label="L·ªùi ch·ª©ng th·ª±c c·ªßa kh√°ch h√†ng"> <!-- Wrapper for overflow and snap -->
                        <div id="testimonial-slider" role="presentation"> <!-- This now acts as the flex container for cards -->
                            <!-- Testimonial cards will be dynamically inserted here by JavaScript -->
                        </div>
                    </div>
                    <button id="prev-testimonial" class="absolute left-0 top-1/2 transform -translate-y-1/2 -translate-x-1/2 bg-white/70 hover:bg-white text-brand p-3 rounded-full shadow-md z-10" aria-label="Xem l·ªùi ch·ª©ng th·ª±c tr∆∞·ªõc">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2.5" stroke="currentColor" class="w-6 h-6">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 19.5L8.25 12l7.5-7.5" />
                        </svg>
                    </button>
                    <button id="next-testimonial" class="absolute right-0 top-1/2 transform -translate-y-1/2 translate-x-1/2 bg-white/70 hover:bg-white text-brand p-3 rounded-full shadow-md z-10" aria-label="Xem l·ªùi ch·ª©ng th·ª±c ti·∫øp theo">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2.5" stroke="currentColor" class="w-6 h-6">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M8.25 4.5l7.5 7.5-7.5 7.5" />
                        </svg>
                    </button>
                </div>
            </div>
        </section>
    </main>

    <footer class="bg-gray-800 text-white py-12" role="contentinfo">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
            <h3 class="text-2xl font-bold font-heading">S·∫Øc M·ªôc</h3> <!-- Applied font-heading here -->
            <p class="mt-2">T·ª± nhi√™n t·ª´ S·∫Øc, M·ªôc t·ª´ t√¢m</p> <!-- Updated text as requested -->
            <div class="mt-6 flex justify-center space-x-6">
                <!-- Updated Facebook link to the specified URL -->
                <a href="https://www.facebook.com/profile.php?id=61576617677748" class="hover:text-brand-light" aria-label="Theo d√µi ch√∫ng t√¥i tr√™n Facebook" target="_blank" rel="noopener noreferrer">Facebook</a>
                <a href="#" class="hover:text-brand-light" aria-label="Theo d√µi ch√∫ng t√¥i tr√™n Instagram">Instagram</a>
                <a href="#" class="hover:text-brand-light" aria-label="Theo d√µi ch√∫ng t√¥i tr√™n Tiktok">Tiktok</a>
            </div>
            <p class="mt-6 text-sm text-gray-400">&copy; 2025 S·∫Øc M·ªôc Vi·ªát Nam. All rights reserved.</p>
        </div>
    </footer>

    <!-- Shopping Cart Sidebar -->
    <div id="cart-sidebar" class="cart-sidebar">
        <div class="flex justify-between items-center p-6 border-b border-gray-200">
            <h3 class="text-2xl font-bold text-brand font-heading">Gi·ªè H√†ng</h3>
            <button id="close-cart-sidebar" class="text-gray-500 hover:text-gray-800 focus:outline-none p-2 rounded-full hover:bg-gray-100 transition-colors" aria-label="ƒê√≥ng gi·ªè h√†ng">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-6 h-6">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
                </svg>
            </button>
        </div>
        <div id="cart-items" class="flex-grow p-6 overflow-y-auto">
            <!-- Cart items will be dynamically inserted here -->
            <p id="empty-cart-message" class="text-center text-gray-500 hidden">Gi·ªè h√†ng c·ªßa b·∫°n ƒëang tr·ªëng.</p>
        </div>
        <div class="p-6 border-t border-gray-200">
            <!-- Discount Code Section -->
            <div class="mb-4">
                <label for="discount-code" class="block text-sm font-medium text-gray-700 mb-2">M√£ gi·∫£m gi√°:</label>
                <div class="flex space-x-2">
                    <input type="text" id="discount-code" class="flex-grow p-2 border border-gray-300 rounded-md focus:ring-brand focus:border-brand-light outline-none" placeholder="Nh·∫≠p m√£ gi·∫£m gi√°">
                    <button id="apply-discount-btn" class="bg-gray-400 text-white px-4 py-2 rounded-md cursor-not-allowed" disabled>√Åp d·ª•ng</button>
                </div>
                <p id="discount-message" class="text-sm mt-2"></p>
            </div>

            <div class="flex justify-between items-center text-lg font-semibold text-gray-800 mb-2">
                <span>T·∫°m t√≠nh:</span>
                <span id="cart-subtotal-price">0‚Ç´</span>
            </div>
            <div id="discount-display" class="flex justify-between items-center text-base text-red-600 mb-4 hidden">
                <span>Gi·∫£m gi√° (<span id="discount-percentage">0%</span>):</span>
                <span id="discount-amount">-0‚Ç´</span>
            </div>
            <div class="flex justify-between items-center text-lg font-semibold text-gray-800 mb-4">
                <span>T·ªïng c·ªông:</span>
                <span id="cart-total-price">0‚Ç´</span>
            </div>
            <button class="w-full bg-brand text-white font-bold py-3 px-4 rounded-lg shadow-md hover:bg-opacity-90 transition-transform transform hover:scale-105" aria-label="Ti·∫øn h√†nh thanh to√°n">
                Thanh To√°n
            </button>
        </div>
    </div>
    <!-- Cart Overlay -->
    <div id="cart-overlay" class="cart-overlay"></div>

    <!-- Removed VTO Modal section entirely -->

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Mobile menu toggle
            const mobileMenuButton = document.getElementById('mobile-menu-button');
            const mobileMenu = document.getElementById('mobile-menu');

            mobileMenuButton.addEventListener('click', () => {
                mobileMenu.classList.toggle('hidden');
            });
            
            // Smooth scroll for anchor links and close mobile menu on click
            document.querySelectorAll('#mobile-menu a, header a[href^="#"]').forEach(link => {
                link.addEventListener('click', (e) => {
                    if (link.closest('#mobile-menu')) mobileMenu.classList.add('hidden'); // Close mobile menu
                    const targetId = link.getAttribute('href');
                    if (targetId.startsWith('#')) { // Check if it's an anchor link
                        e.preventDefault();
                        document.querySelector(targetId).scrollIntoView({ behavior: 'smooth'});
                    }
                    // If it's not an anchor link (e.g., href="thu_son_ao.html"), let the default behavior happen
                });
            });

            // Intersection Observer for scroll animations
            const observerOptions = {
                root: null, // viewport
                rootMargin: '0px',
                threshold: 0.1 // Trigger when 10% of the element is visible
            };

            const observer = new IntersectionObserver((entries, observer) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('visible');
                        observer.unobserve(entry.target); // Stop observing once animated
                    }
                });
            }, observerOptions);

            // Observe existing static elements
            document.querySelectorAll('.animate-on-scroll').forEach(element => {
                // If element is already in viewport on load, make it visible immediately
                if (element.getBoundingClientRect().top < window.innerHeight) {
                    element.classList.add('visible');
                } else {
                    // Otherwise, observe it for when it comes into view
                    observer.observe(element);
                }
            });


            // Comparison Chart
            const comparisonChartCtx = document.getElementById('comparisonChart').getContext('2d');
            new Chart(comparisonChartCtx, {
                type: 'bar',
                data: {
                    labels: ['Th√†nh Ph·∫ßn', 'Bao B√¨', 'Th·ª≠ Nghi·ªám ƒê·ªông V·∫≠t', 'Minh B·∫°ch Ngu·ªìn G·ªëc', 'Hi·ªáu Su·∫•t'],
                    datasets: [{
                        label: 'Son Truy·ªÅn Th·ªëng',
                        data: [4, 2, 3, 2, 8], // Example scores
                        backgroundColor: '#A2B99C', // bg-brand-light
                        borderColor: '#8CA786',
                        borderWidth: 1
                    }, {
                        label: 'S·∫Øc M·ªôc',
                        data: [9, 8, 10, 10, 9], // Example scores for Sac Moc
                        backgroundColor: '#5D7A4D', // bg-brand
                        borderColor: '#4D643E',
                        borderWidth: 1
                    }]
                },
                options: {
                    indexAxis: 'y', // Horizontal bar chart
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        x: {
                            beginAtZero: true,
                            max: 10 // Assuming scores are out of 10
                        },
                        y: {
                            ticks: {
                                font: {
                                    size: 12 // Adjust font size if needed
                                }
                            }
                        }
                    }
                }
            });

            // Products Data - C·∫•u tr√∫c d·ªØ li·ªáu ƒë√£ ƒë∆∞·ª£c c·∫≠p nh·∫≠t
            const products = [
                { id: 'son-do-cam', displayName: 'ƒê·ªè Cam', fullName: 'ƒê·ªè Cam - 01', color: '#FF4500', hexOpacity: 'FF4500B3', price: 300000 },
                { id: 'son-cam-tuoi', displayName: 'Cam T∆∞∆°i', fullName: 'Cam T∆∞∆°i - 02', color: '#FFA500', hexOpacity: 'FFA500B3', price: 300000 },
                { id: 'son-do-hong', displayName: 'ƒê·ªè H·ªìng', fullName: 'ƒê·ªè H·ªìng - 03', color: '#FF69B4', hexOpacity: 'FF69B4B3', price: 300000 },
                { id: 'son-do-cherry', displayName: 'ƒê·ªè Cherry', fullName: 'ƒê·ªè Cherry - 04', color: '#DC143C', hexOpacity: 'DC143CB3', price: 300000 },
                { id: 'son-hong-canh-sen', displayName: 'H·ªìng C√°nh Sen', fullName: 'H·ªìng C√°nh Sen - 05', color: '#FF007F', hexOpacity: 'FF007FB3', price: 300000 },
                { id: 'son-cam-dat', displayName: 'Cam ƒê·∫•t', fullName: 'Cam ƒê·∫•t - 06', color: '#CD853F', hexOpacity: 'CD853FB3', price: 300000 },
                { id: 'son-hong-cam', displayName: 'H·ªìng Cam', fullName: 'H·ªìng Cam - 07', color: '#FF7F50', hexOpacity: 'FF7F50B3', price: 300000 },
                { id: 'son-do-ruou-vang', displayName: 'ƒê·ªè R∆∞·ª£u Vang', fullName: 'ƒê·ªè R∆∞·ª£u Vang - 08', color: '#800020', hexOpacity: '800020B3', price: 300000 },
                { id: 'son-hong-fuchsia', displayName: 'H·ªìng Fuchsia', fullName: 'H·ªìng Fuchsia - 09', color: '#C154C1', hexOpacity: 'C154C1B3', price: 300000 },
                { id: 'son-nude-dao', displayName: 'Nude ƒê√†o', fullName: 'Nude ƒê√†o - 10', color: '#F7CAC9', hexOpacity: 'F7CAC9B3', price: 300000 },
                { id: 'son-man-chin', displayName: 'M·∫≠n Ch√≠n', fullName: 'M·∫≠n Ch√≠n - 11', color: '#8E4585', hexOpacity: '8E4585B3', price: 300000 },
                { id: 'son-hong-tim', displayName: 'H·ªìng T√≠m', fullName: 'H·ªìng T√≠m - 12', color: '#C8A2C8', hexOpacity: 'C8A2C8B3', price: 300000 } 
            ];

            // Shopping Cart Logic
            let cart = {}; // { productId: quantity }
            let appliedDiscount = { code: '', percentage: 0, amount: 0 }; // Stores applied discount information

            const discountCodes = {
                "chaobanmoi": 0.15, // 15% discount
                "sonsacmoc": 0.05   // 5% discount
            };

            const cartBadgeDesktop = document.getElementById('cart-badge-desktop');
            const cartBadgeMobile = document.getElementById('cart-badge-mobile');
            const cartIconDesktop = document.getElementById('cart-icon-desktop');
            const cartIconMobile = document.getElementById('cart-icon-mobile');
            const cartSidebar = document.getElementById('cart-sidebar');
            const cartOverlay = document.getElementById('cart-overlay');
            const closeCartSidebarBtn = document.getElementById('close-cart-sidebar');
            const cartItemsContainer = document.getElementById('cart-items');
            const cartSubtotalPriceElement = document.getElementById('cart-subtotal-price'); // New element for subtotal
            const discountDisplayElement = document.getElementById('discount-display');
            const discountPercentageElement = document.getElementById('discount-percentage');
            const discountAmountElement = document.getElementById('discount-amount');
            const cartTotalPriceElement = document.getElementById('cart-total-price');
            const emptyCartMessage = document.getElementById('empty-cart-message');
            const discountCodeInput = document.getElementById('discount-code');
            const applyDiscountBtn = document.getElementById('apply-discount-btn');
            const discountMessageElement = document.getElementById('discount-message');


            function updateCartCount() {
                let totalItems = 0;
                for (const productId in cart) {
                    totalItems += cart[productId];
                }
                if (totalItems > 0) {
                    cartBadgeDesktop.textContent = totalItems;
                    cartBadgeMobile.textContent = totalItems;
                    cartBadgeDesktop.classList.remove('hidden');
                    cartBadgeMobile.classList.remove('hidden');
                } else {
                    cartBadgeDesktop.classList.add('hidden');
                    cartBadgeMobile.classList.add('hidden');
                }
            }

            function formatCurrency(amount) {
                // Add non-breaking space for thousands separator and currency symbol
                return new Intl.NumberFormat('vi-VN', { style: 'currency', currency: 'VND' }).format(amount).replace(/\s/g, '\u00A0');
            }

            function calculateTotals() {
                let subtotal = 0;
                for (const productId in cart) {
                    const quantity = cart[productId];
                    const product = products.find(p => p.id === productId);
                    if (product) {
                        subtotal += quantity * product.price;
                    }
                }

                let total = subtotal;
                if (appliedDiscount.percentage > 0) {
                    appliedDiscount.amount = subtotal * appliedDiscount.percentage;
                    total = subtotal - appliedDiscount.amount;
                    discountDisplayElement.classList.remove('hidden');
                    discountPercentageElement.textContent = `${appliedDiscount.percentage * 100}%`;
                    discountAmountElement.textContent = `-${formatCurrency(appliedDiscount.amount)}`;
                } else {
                    discountDisplayElement.classList.add('hidden');
                    appliedDiscount.amount = 0; // Reset amount if no code is applied
                }

                cartSubtotalPriceElement.textContent = formatCurrency(subtotal);
                cartTotalPriceElement.textContent = formatCurrency(total);
                return { subtotal, total };
            }

            function renderCart() {
                cartItemsContainer.innerHTML = ''; // Clear current items
                let hasItems = false;

                for (const productId in cart) {
                    const quantity = cart[productId];
                    if (quantity > 0) {
                        hasItems = true;
                        const product = products.find(p => p.id === productId);
                        if (product) {
                            const itemTotal = quantity * product.price;

                            const cartItemDiv = document.createElement('div');
                            cartItemDiv.className = 'flex items-center justify-between py-3 border-b border-gray-200 last:border-b-0';
                            cartItemDiv.innerHTML = `
                                <div class="flex items-center space-x-4 flex-grow">
                                    <div class="w-16 h-16 rounded-lg flex-shrink-0" style="background-color: ${product.color};"></div>
                                    <div class="flex-grow">
                                        <p class="font-semibold text-gray-800 text-sm md:text-base">${product.fullName}</p>
                                        <p class="text-gray-600 text-xs md:text-sm">${formatCurrency(product.price)}</p>
                                    </div>
                                </div>
                                <div class="flex items-center space-x-2 flex-shrink-0 mx-2">
                                    <button class="cart-quantity-btn cart-decrease-btn bg-gray-200 text-gray-700 w-7 h-7 md:w-8 md:h-8 rounded-full hover:bg-gray-300 transition-colors flex items-center justify-center" data-product-id="${product.id}" aria-label="Gi·∫£m s·ªë l∆∞·ª£ng ${product.fullName}">-</button>
                                    <span class="font-semibold text-gray-800 w-5 text-center text-sm" data-product-id="${product.id}-quantity-cart">${quantity}</span>
                                    <button class="cart-quantity-btn cart-increase-btn bg-gray-200 text-gray-700 w-7 h-7 md:w-8 md:h-8 rounded-full hover:bg-gray-300 transition-colors flex items-center justify-center" data-product-id="${product.id}" aria-label="TƒÉng s·ªë l∆∞·ª£ng ${product.fullName}">+</button>
                                </div>
                                <span class="font-semibold text-brand text-right w-[90px] flex-shrink-0 text-sm md:text-base">${formatCurrency(itemTotal)}</span>
                            `;
                            cartItemsContainer.appendChild(cartItemDiv);
                        }
                    }
                }

                if (hasItems) {
                    emptyCartMessage.classList.add('hidden');
                } else {
                    emptyCartMessage.classList.remove('hidden');
                }

                calculateTotals();
                updateCartCount();
            }

            function addToCart(productId, animate = true) {
                cart[productId] = (cart[productId] || 0) + 1;
                renderCart();
                // Update quantity display on the product card
                const quantityDisplay = document.querySelector(`#${productId}-quantity`);
                if (quantityDisplay) {
                    quantityDisplay.textContent = cart[productId];
                }

                if (animate) {
                    triggerFlyToCartAnimation(productId);
                }
            }

            function decreaseQuantity(productId) {
                if (cart[productId] && cart[productId] > 0) {
                    cart[productId]--;
                    if (cart[productId] === 0) {
                        delete cart[productId]; // Remove if quantity is 0
                    }
                    renderCart();
                    // Update quantity display on the product card
                    const quantityDisplay = document.querySelector(`#${productId}-quantity`);
                    if (quantityDisplay) {
                        quantityDisplay.textContent = cart[productId] || 0; // Show 0 if removed
                    }
                }
            }

            // Function to trigger the fly-to-cart animation
            function triggerFlyToCartAnimation(productId) {
                const productCard = document.getElementById(productId);
                // Dynamically select the correct cart icon based on screen size
                const cartIcon = window.innerWidth >= 768 ? cartIconDesktop : cartIconMobile;

                if (!productCard || !cartIcon) return;

                const productRect = productCard.querySelector('.relative').getBoundingClientRect();
                const cartRect = cartIcon.getBoundingClientRect();

                const flyEl = document.createElement('div');
                flyEl.className = 'fly-to-cart-animation';
                flyEl.style.setProperty('--start-x', `${productRect.left + productRect.width / 2 - 20}px`); // Centered and adjusted for 40px size
                flyEl.style.setProperty('--start-y', `${productRect.top + productRect.height / 2 - 20}px`); // Centered and adjusted for 40px size
                flyEl.style.setProperty('--end-x', `${cartRect.left + cartRect.width / 2 - 10}px`); // Centered on target, adjusted for 20px size
                flyEl.style.setProperty('--end-y', `${cartRect.top + cartRect.height / 2 - 10}px`); // Centered on target, adjusted for 20px size
                flyEl.style.setProperty('--size', '40px'); // Initial size of the flying element
                
                const product = products.find(p => p.id === productId);
                flyEl.style.setProperty('--color', product ? product.color : '#5D7A4D'); // Use product color

                document.body.appendChild(flyEl);

                // Trigger animation
                requestAnimationFrame(() => {
                    flyEl.classList.add('animate');
                });

                // Remove element after animation
                flyEl.addEventListener('transitionend', () => {
                    flyEl.remove();
                });
            }


            // Event listeners for cart icons
            cartIconDesktop.addEventListener('click', () => {
                cartSidebar.classList.add('open');
                cartOverlay.classList.add('open');
            });

            cartIconMobile.addEventListener('click', () => {
                cartSidebar.classList.add('open');
                cartOverlay.classList.add('open');
            });

            // Close cart sidebar
            closeCartSidebarBtn.addEventListener('click', () => {
                cartSidebar.classList.remove('open');
                cartOverlay.classList.remove('open');
            });

            // Close cart when clicking overlay
            cartOverlay.addEventListener('click', () => {
                cartSidebar.classList.remove('open');
                cartOverlay.classList.remove('open');
            });

            // Event delegation for +/- buttons in the cart sidebar
            cartItemsContainer.addEventListener('click', (e) => {
                const target = e.target;
                if (target.classList.contains('cart-increase-btn')) {
                    const productId = target.dataset.productId;
                    addToCart(productId, false); // No animation when adding from cart sidebar
                } else if (target.classList.contains('cart-decrease-btn')) {
                    const productId = target.dataset.productId;
                    decreaseQuantity(productId);
                }
            });

            // Discount code input validation and button state
            discountCodeInput.addEventListener('input', () => {
                const code = discountCodeInput.value.toLowerCase().trim();
                if (discountCodes[code]) {
                    applyDiscountBtn.disabled = false;
                    applyDiscountBtn.classList.remove('bg-gray-400', 'cursor-not-allowed');
                    applyDiscountBtn.classList.add('bg-brand-light', 'hover:bg-brand');
                } else {
                    applyDiscountBtn.disabled = true;
                    applyDiscountBtn.classList.add('bg-gray-400', 'cursor-not-allowed');
                    applyDiscountBtn.classList.remove('bg-brand-light', 'hover:bg-brand');
                }
                // Clear discount message and reset applied discount if input changes after successful application
                if (appliedDiscount.code && code !== appliedDiscount.code) {
                    appliedDiscount.code = '';
                    appliedDiscount.percentage = 0;
                    appliedDiscount.amount = 0;
                    discountMessageElement.textContent = "";
                    calculateTotals();
                }
            });

            // Discount code application logic
            applyDiscountBtn.addEventListener('click', () => {
                const code = discountCodeInput.value.toLowerCase().trim();
                if (code === appliedDiscount.code) {
                    discountMessageElement.textContent = "M√£ gi·∫£m gi√° ƒë√£ ƒë∆∞·ª£c √°p d·ª•ng.";
                    discountMessageElement.className = "text-sm mt-2 text-blue-600";
                    return;
                }

                if (discountCodes[code]) {
                    appliedDiscount.code = code;
                    appliedDiscount.percentage = discountCodes[code];
                    discountMessageElement.textContent = `√Åp d·ª•ng m√£ gi·∫£m gi√° "${code}" th√†nh c√¥ng!`;
                    discountMessageElement.className = "text-sm mt-2 text-green-600";
                } else {
                    appliedDiscount.code = '';
                    appliedDiscount.percentage = 0;
                    appliedDiscount.amount = 0; // Reset amount if invalid code
                    discountMessageElement.textContent = "M√£ gi·∫£m gi√° kh√¥ng h·ª£p l·ªá.";
                    discountMessageElement.className = "text-sm mt-2 text-red-600";
                }
                calculateTotals(); // Recalculate totals with new discount
            });

            // Populate Product List with +/- buttons
            const productList = document.getElementById('product-list');
            productList.innerHTML = ''; // Clear existing content
            products.forEach(p => {
                const card = document.createElement('div');
                card.id = p.id; // Set ID for easy access
                card.className = 'group text-center animate-on-scroll zoom-in'; // Container for each product card, centered text
                card.innerHTML = `
                    <div class="relative w-full aspect-square rounded-lg overflow-hidden card-hover" aria-label="S·∫£n ph·∫©m son ${p.displayName}">
                        <div class="absolute inset-0 flex items-center justify-center" style="background-color: ${p.color};">
                            <h3 class="text-white text-2xl font-bold font-heading px-2 py-1">${p.displayName}</h3> 
                        </div>
                    </div>
                    <div class="mt-3 flex flex-col items-center"> <!-- Container for full name and small color circle, with top margin -->
                        <h4 class="font-semibold text-gray-800">${p.fullName}</h4>
                        <p class="text-brand font-bold mt-1">${formatCurrency(p.price)}</p>
                        <!-- Removed the small color circle here as requested -->
                        <!-- Quantity controls -->
                        <div class="flex items-center justify-center mt-3 space-x-2">
                            <button class="decrease-product-quantity bg-gray-200 text-gray-700 w-8 h-8 rounded-full hover:bg-gray-300 transition-colors" data-product-id="${p.id}" aria-label="Gi·∫£m s·ªë l∆∞·ª£ng ${p.fullName}">-</button>
                            <span id="${p.id}-quantity" class="font-semibold text-gray-800 w-6 text-center">0</span>
                            <button class="increase-product-quantity bg-brand-light text-white w-8 h-8 rounded-full hover:bg-brand transition-colors" data-product-id="${p.id}" aria-label="TƒÉng s·ªë l∆∞·ª£ng ${p.fullName}">+</button>
                        </div>
                    </div>
                `;
                productList.appendChild(card);
                // Observe dynamically added card after it's appended
                if (card.getBoundingClientRect().top < window.innerHeight) {
                    card.classList.add('visible');
                } else {
                    observer.observe(card); 
                }
            });

            // Event delegation for product quantity buttons
            productList.addEventListener('click', (e) => {
                const target = e.target;
                if (target.classList.contains('increase-product-quantity')) {
                    const productId = target.dataset.productId;
                    addToCart(productId); // Animation triggered here
                } else if (target.classList.contains('decrease-product-quantity')) {
                    const productId = target.dataset.productId;
                    decreaseQuantity(productId);
                }
            });

            // Initial render of the cart
            renderCart();


            // Ingredients Accordion Data
            const ingredientsData = [
                { name: 'D·∫ßu Jojoba H·ªØu C∆°', description: 'Gi√†u Vitamin E, ho·∫°t ƒë·ªông nh∆∞ m·ªôt ch·∫•t d∆∞·ª°ng ·∫©m t·ª± nhi√™n, gi√∫p m√¥i m·ªÅm m·∫°i v√† cƒÉng m·ªçng. Ngu·ªìn g·ªëc t·ª´ c√°c trang tr·∫°i h·ªØu c∆° b·ªÅn v·ªØng.' },
                { name: 'B∆° H·∫°t M·ª°', description: 'Cung c·∫•p ƒë·ªô ·∫©m s√¢u, l√†m d·ªãu v√† ph·ª•c h·ªìi ƒë√¥i m√¥i kh√¥, n·ª©t n·∫ª. ƒê∆∞·ª£c thu mua c√¥ng b·∫±ng t·ª´ c√°c h·ª£p t√°c x√£ ph·ª• n·ªØ ·ªü T√¢y Phi.' },
                { name: 'S√°p Candelilla', description: 'M·ªôt lo·∫°i s√°p th·ª±c v·∫≠t thay th·∫ø cho s√°p ong, t·∫°o ƒë·ªô c·ª©ng v√† b√≥ng cho son m√¥i. Thu ho·∫°ch t·ª´ c√¢y Candelilla ·ªü sa m·∫°c Chihuahuan.'},
                { name: 'M√†u Kho√°ng Thi√™n Nhi√™n', description: 'S·ª≠ d·ª•ng oxit s·∫Øt v√† mica ƒë∆∞·ª£c khai th√°c c√≥ ƒë·∫°o ƒë·ª©c thay cho thu·ªëc nhu·ªôm t·ªïng h·ª£p, ƒë·∫£m b·∫£o m√†u s·∫Øc an to√†n v√† r·ª±c r·ª°.'}
            ];

            // Populate Ingredient Accordion
            const accordion = document.getElementById('ingredient-accordion');
            accordion.innerHTML = ''; // Clear existing content
            ingredientsData.forEach((ing, index) => {
                const item = document.createElement('div');
                item.className = 'border border-gray-200 rounded-lg overflow-hidden animate-on-scroll slide-up'; // Added animation class
                item.style.transitionDelay = `${index * 0.1}s`; // Stagger delay for each item
                item.innerHTML = `
                    <button class="accordion-button w-full text-left p-4 bg-brand-superlight hover:bg-brand-light transition duration-300 flex justify-between items-center" 
                            id="accordion-header-${index}" 
                            aria-expanded="false" 
                            aria-controls="accordion-content-${index}" 
                            role="tab" 
                            tabindex="0" 
                            aria-label="Th√¥ng tin chi ti·∫øt v·ªÅ ${ing.name}">
                        <span class="font-semibold text-brand">${ing.name}</span>
                        <span class="accordion-icon text-brand font-bold">+</span>
                    </button>
                    <div class="accordion-content hidden p-4 bg-[#F5F5DC]" 
                         id="accordion-content-${index}" 
                         role="tabpanel" 
                         aria-labelledby="accordion-header-${index}">
                        <p class="text-gray-600">${ing.description}</p>
                    </div>
                `;
                accordion.appendChild(item);
                // Observe dynamically added accordion item after it's appended
                if (item.getBoundingClientRect().top < window.innerHeight) {
                    item.classList.add('visible');
                } else {
                    observer.observe(item);
                }
            });
            
            // Accordion Functionality
            accordion.addEventListener('click', function(e) {
                const button = e.target.closest('.accordion-button');
                if (button) {
                    const content = button.nextElementSibling;
                    const icon = button.querySelector('.accordion-icon');
                    const isHidden = content.classList.contains('hidden');
                    
                    // Close all other accordions
                    document.querySelectorAll('#ingredient-accordion .accordion-content').forEach(c => {
                        c.classList.add('hidden');
                        c.setAttribute('aria-hidden', 'true');
                    });
                    document.querySelectorAll('#ingredient-accordion .accordion-button').forEach(btn => {
                        btn.setAttribute('aria-expanded', 'false');
                        btn.querySelector('.accordion-icon').textContent = '+';
                    });
                    
                    // Toggle current accordion
                    if (isHidden) {
                        content.classList.remove('hidden');
                        content.setAttribute('aria-hidden', 'false');
                        button.setAttribute('aria-expanded', 'true');
                        icon.textContent = '-';
                    } else {
                        // If it was already open and clicked, close it
                        content.classList.add('hidden');
                        content.setAttribute('aria-hidden', 'true');
                        button.setAttribute('aria-expanded', 'false');
                        icon.textContent = '+';
                    }
                }
            });

            // Testimonials Data - Added more testimonials here for a better loop experience
            const testimonials = [
                { text: "L·∫ßn ƒë·∫ßu ti√™n m√¨nh t√¨m ƒë∆∞·ª£c m·ªôt th·ªèi son v·ª´a ƒë·∫πp, v·ª´a l√¢u tr√¥i m√† l·∫°i an t√¢m v·ªÅ th√†nh ph·∫ßn. Y√™u S·∫Øc M·ªôc!", author: "An Nhi√™n, TP.HCM" },
                { text: "M√¨nh ƒëang mang thai n√™n r·∫•t k·ªπ t√≠nh. S·∫Øc M·ªôc l√† c·ª©u tinh, gi√∫p m√¨nh v·∫´n xinh ƒë·∫πp m√† kh√¥ng lo ·∫£nh h∆∞·ªüng ƒë·∫øn b√©.", author: "Minh Th∆∞, H√† N·ªôi" },
                { text: "Th√≠ch nh·∫•t l√† bao b√¨! V·ª´a ƒë·∫πp v·ª´a th√¢n thi·ªán m√¥i tr∆∞·ªùng. M·ªôt th∆∞∆°ng hi·ªáu Vi·ªát Nam qu√° t·ª± h√†o.", author: "Qu·ª≥nh Anh, ƒê√† N·∫µng" },
                { text: "M√†u son l√™n chu·∫©n, ch·∫•t son m·ªÅm m·ªãn kh√¥ng g√¢y kh√¥ m√¥i. S·∫Ω ·ªßng h·ªô S·∫Øc M·ªôc d√†i d√†i.", author: "Ng·ªçc H√†, H·∫£i Ph√≤ng" },
                { text: "T√¨m ki·∫øm m√£i m·ªõi ƒë∆∞·ª£c m·ªôt brand son 's·∫°ch' ƒë√∫ng nghƒ©a. R·∫•t h√†i l√≤ng v·ªõi ch·∫•t l∆∞·ª£ng s·∫£n ph·∫©m.", author: "Thu Trang, C·∫ßn Th∆°" },
                { text: "T·ª´ ng√†y d√πng S·∫Øc M·ªôc, m√¨nh kh√¥ng c√≤n lo l·∫Øng v·ªÅ ch√¨ hay h√≥a ch·∫•t ƒë·ªôc h·∫°i n·ªØa. C·∫£m ∆°n th∆∞∆°ng hi·ªáu!", author: "Ph∆∞∆°ng Vy, B√¨nh D∆∞∆°ng" },
                { text: "Son S·∫Øc M·ªôc m√†u l√™n chu·∫©n, m·ªÅm m√¥i, kh√¥ng h·ªÅ g√¢y b·∫øt d√≠nh. D√πng h√†ng ng√†y r·∫•t ti·ªán l·ª£i v√† an to√†n.", author: "Ho√†ng Y·∫øn, C·∫ßn Th∆°" },
                { text: "Tr∆∞·ªõc gi·ªù m√¨nh lu√¥n t√¨m ki·∫øm s·∫£n ph·∫©m thu·∫ßn chay, v√† S·∫Øc M·ªôc ƒë√£ v∆∞·ª£t xa mong ƒë·ª£i c·ªßa m√¨nh. Ch·∫•t l∆∞·ª£ng tuy·ªát v·ªùi!", author: "V√¢n Anh, Long An" },
                { text: "Th·ª±c s·ª± b·∫•t ng·ªù v·ªõi ƒë·ªô b·ªÅn m√†u v√† d∆∞·ª°ng ·∫©m c·ªßa son S·∫Øc M·ªôc. R·∫•t ƒë√°ng ƒë·ªÉ th·ª≠!", author: "Kim Chi, Kh√°nh H√≤a" },
                { text: "Bao b√¨ th√¢n thi·ªán m√¥i tr∆∞·ªùng l√† ƒëi·ªÉm c·ªông l·ªõn. M√¨nh r·∫•t vui khi ·ªßng h·ªô m·ªôt th∆∞∆°ng hi·ªáu c√≥ tr√°ch nhi·ªám.", author: "Thanh Mai, B√¨nh Thu·∫≠n" },
                { text: "Son l√™n m√†u t·ª± nhi√™n, ph√π h·ª£p ƒë·ªÉ ƒëi l√†m ho·∫∑c ƒëi ch∆°i. R·∫•t th√≠ch s·ª± nh·∫π nh√†ng v√† an to√†n c·ªßa s·∫£n ph·∫©m.", author: "H∆∞∆°ng Giang, ƒê·ªìng Nai" },
                { text: "Ch·∫•t son m·ªãn m√†ng nh∆∞ b∆°, kh√¥ng g√¢y kh√¥ m√¥i ch√∫t n√†o. S·∫Øc M·ªôc l√† l·ª±a ch·ªçn ho√†n h·∫£o cho nh·ªØng c√¥ n√†ng b·∫≠n r·ªôn.", author: "Th√πy Linh, V≈©ng T√†u" },
                { text: "R·∫•t ·∫•n t∆∞·ª£ng v·ªõi cam k·∫øt minh b·∫°ch th√†nh ph·∫ßn c·ªßa S·∫Øc M·ªôc. Gi·ªù ƒë√¢y m√¨nh c√≥ th·ªÉ y√™n t√¢m s·ª≠ d·ª•ng m·ªói ng√†y.", author: "Di·ªáu Hoa, Ngh·ªá An" },
                { text: "M√†u s·∫Øc r·∫•t trendy v√† ƒëa d·∫°ng, m√¨nh c√≥ th·ªÉ t√¨m th·∫•y m·ªçi t√¥ng m√†u y√™u th√≠ch t·∫°i S·∫Øc M·ªôc.", author: "Mai Ph∆∞∆°ng, Hu·∫ø" },
                { text: "M√¨nh ƒë√£ gi·ªõi thi·ªáu S·∫Øc M·ªôc cho t·∫•t c·∫£ b·∫°n b√® v√† m·ªçi ng∆∞·ªùi ƒë·ªÅu r·∫•t h√†i l√≤ng. S·∫£n ph·∫©m ch·∫•t l∆∞·ª£ng cao v√† an to√†n.", author: "Kh√°nh Ly, Th√°i B√¨nh" , image: "https://placehold.co/150x150/A2B99C/FFFFFF?text=Kh√°nh+Ly"},
                { text: "Y√™u th√≠ch s·ª± t·ª± nhi√™n v√† d·ªãu nh·∫π c·ªßa S·∫Øc M·ªôc. Kh√¥ng h·ªÅ g√¢y k√≠ch ·ª©ng hay n·∫∑ng m√¥i nh∆∞ c√°c lo·∫°i son kh√°c.", author: "Trang Anh, Ph√∫ Th·ªç" , image: "https://placehold.2o/150x150/A2B99C/FFFFFF?text=Trang+Anh"},
                { text: "Son m√¥i c·ªßa S·∫Øc M·ªôc c√≥ m√πi th∆°m nh·∫π nh√†ng, kh√¥ng g√¢y kh√≥ ch·ªãu, r·∫•t ph√π h·ª£p cho nh·ªØng ai nh·∫°y c·∫£m v·ªõi m√πi h∆∞∆°ng.", author: "Linh Chi, Vƒ©nh Ph√∫c" },
                { text: "M√¨nh r·∫•t th√≠ch c√°ch S·∫Øc M·ªôc ch√∫ tr·ªçng ƒë·∫øn nguy√™n li·ªáu t·ª± nhi√™n. Son d√πng an to√†n m√† v·∫´n gi·ªØ ƒë∆∞·ª£c m√†u s·∫Øc t∆∞∆°i t·∫Øn.", author: "Qu·ª≥nh H∆∞∆°ng, B·∫Øc Ninh" },
                { text: "Thi·∫øt k·∫ø bao b√¨ sang tr·ªçng v√† tinh t·∫ø, c·∫ßm r·∫•t ch·∫Øc tay. S·∫Øc M·ªôc kh√¥ng ch·ªâ l√† son m√† c√≤n l√† ph·ª• ki·ªán th·ªùi trang.", author: "Nguy·ªát √Ånh, Thanh H√≥a" },
                { text: "Ch·∫•t l∆∞·ª£ng son v∆∞·ª£t tr·ªôi so v·ªõi m·ª©c gi√°. M√¨nh ƒë√£ th·ª≠ nhi·ªÅu lo·∫°i son t·ª± nhi√™n nh∆∞ng S·∫Øc M·ªôc th·ª±c s·ª± kh√°c bi·ªát.", author: "H·ªìng Nhung, Nam ƒê·ªãnh" },
                { text: "S·∫Øc M·ªôc ƒë√£ thay ƒë·ªïi quan ƒëi·ªÉm c·ªßa m√¨nh v·ªÅ son m√¥i. V·ª´a ƒë·∫πp, v·ª´a an to√†n, kh√¥ng c√≤n ph·∫£i lo l·∫Øng v·ªÅ t√°c ƒë·ªông x·∫•u n·ªØa.", author: "Thanh Tr√∫c, B√¨nh ƒê·ªãnh" },
                { text: "M√¨nh r·∫•t ·∫•n t∆∞·ª£ng v·ªõi d·ªãch v·ª• chƒÉm s√≥c kh√°ch h√†ng c·ªßa S·∫Øc M·ªôc. H·ªç r·∫•t nhi·ªát t√¨nh v√† chu ƒë√°o.", author: "Thu Th·∫£o, Vƒ©nh Long" },
                { text: "M√†u son l√™n r·∫•t t·ª± nhi√™n, gi√∫p m√¨nh t·ª± tin h∆°n m·ªói ng√†y. S·∫Øc M·ªôc l√† l·ª±a ch·ªçn ho√†n h·∫£o cho phong c√°ch 'no makeup' c·ªßa m√¨nh.", author: "M·ªπ Linh, Ti·ªÅn Giang" },
                { text: "ƒê√¢y l√† th·ªèi son ƒë·∫ßu ti√™n m√¨nh d√πng h·∫øt. R·∫•t y√™u th√≠ch ch·∫•t son v√† m√†u s·∫Øc c·ªßa S·∫Øc M·ªôc.", author: "Kim Ng√¢n, B·∫øn Tre" },
                { text: "S·∫£n ph·∫©m thu·∫ßn chay, kh√¥ng th·ª≠ nghi·ªám tr√™n ƒë·ªông v·∫≠t l√† ƒëi·ªÅu m√¨nh ƒë√°nh gi√° cao nh·∫•t ·ªü S·∫Øc M·ªôc. V·∫ª ƒë·∫πp c√≥ tr√°ch nhi·ªám th·ª±c s·ª±!", author: "Gia H√¢n, ƒê·ªìng Th√°p" },
                { text: "Ch·∫•t son m·ªÅm m·ªãn, kh√¥ng g√¢y b·∫øt d√≠nh. M√¨nh c√≥ th·ªÉ d√πng S·∫Øc M·ªôc c·∫£ ng√†y m√† kh√¥ng lo kh√¥ m√¥i.", author: "H·∫£i Y·∫øn, An Giang" }
            ];

            // Populate Testimonial Slider
            const testimonialSlider = document.getElementById('testimonial-slider');
            testimonialSlider.innerHTML = ''; // Clear existing content
            testimonials.forEach(t => {
                const card = document.createElement('div');
                // Added role="group" and aria-roledescription="slide" for accessibility
                card.className = 'testimonial-card p-4 md:p-6'; // Added padding for spacing
                card.innerHTML = `
                    <div class="bg-white p-6 rounded-xl shadow-sm text-center h-full flex flex-col justify-center card-hover" role="group" aria-roledescription="slide">
                        <p class="text-gray-600 italic text-lg">"${t.text}"</p>
                        <h4 class="mt-4 font-bold text-brand">- ${t.author}</h4>
                    </div>
                `;
                testimonialSlider.appendChild(card);
            });

            // Testimonial Slider Functionality
            const prevTestimonialBtn = document.getElementById('prev-testimonial');
            const nextTestimonialBtn = document.getElementById('next-testimonial');
            let currentTestimonialIndex = 0;

            function getVisibleCardsCount() {
                if (window.innerWidth >= 1024) return 3; // lg
                if (window.innerWidth >= 768) return 2; // md
                return 1; // sm and smaller
            }

            function showTestimonials() {
                if (testimonials.length === 0) {
                    testimonialSlider.style.transform = `translateX(0px)`;
                    return;
                }
                
                const visibleCards = getVisibleCardsCount();
                const viewportWidth = testimonialSlider.parentElement.offsetWidth; // Get the width of the .testimonial-viewport
                
                // Calculate the width for each individual card to fit precisely within the viewport
                const individualCardDisplayWidth = viewportWidth / visibleCards;

                // Apply calculated width to each testimonial card and ensure it doesn't shrink
                testimonialSlider.querySelectorAll('.testimonial-card').forEach(card => {
                    card.style.width = `${individualCardDisplayWidth}px`;
                    card.style.flexShrink = '0'; 
                });

                // Set the total width of the slider to accommodate all cards side-by-side
                testimonialSlider.style.width = `${testimonials.length * individualCardDisplayWidth}px`;

                // Apply the transform to slide the cards
                testimonialSlider.style.transform = `translateX(-${currentTestimonialIndex * individualCardDisplayWidth}px)`;
                
                // Buttons are always enabled for infinite loop
                prevTestimonialBtn.disabled = false;
                nextTestimonialBtn.disabled = false;
            }

            nextTestimonialBtn.addEventListener('click', () => {
                const totalCards = testimonials.length;
                const visibleCards = getVisibleCardsCount();
                // If at the end, loop back to the start
                if (currentTestimonialIndex >= totalCards - visibleCards) {
                    currentTestimonialIndex = 0;
                } else {
                    currentTestimonialIndex++;
                }
                showTestimonials();
            });
            prevTestimonialBtn.addEventListener('click', () => {
                const totalCards = testimonials.length;
                const visibleCards = getVisibleCardsCount();
                // If at the beginning, loop to the end
                if (currentTestimonialIndex === 0) {
                    currentTestimonialIndex = totalCards - visibleCards;
                    // Ensure index is not negative if totalCards is less than visibleCards
                    if (currentTestimonialIndex < 0) currentTestimonialIndex = 0;
                } else {
                    currentTestimonialIndex--;
                }
                showTestimonials();
            });
            window.addEventListener('resize', () => {
                // Reset index on resize to prevent awkward jumps if number of visible cards changes
                currentTestimonialIndex = 0;
                showTestimonials();
            });
            
            // Call showTestimonials after all DOM content is loaded and cards are rendered
            // Using a short timeout to ensure card widths are fully calculated by browser
            // Using a short timeout to ensure card widths are fully calculated by browser
            setTimeout(showTestimonials, 100);
        });
    </script>
</body>
</html>
